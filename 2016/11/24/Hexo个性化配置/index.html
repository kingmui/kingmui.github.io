<!doctype html><html class="theme-next pisces use-motion" lang=zh-CN><head><meta name=generator content="Hexo 3.8.0"><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=theme-color content=#222><script>!function(e,t,o,c,i,a,n){e.DaoVoiceObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(o),n=t.getElementsByTagName(o)[0],a.async=1,a.src=c,a.charset="utf-8",n.parentNode.insertBefore(a,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/256cc8bd.js","daovoice"),daovoice("init",{app_id:"256cc8bd"}),daovoice("update")</script><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel=stylesheet><meta http-equiv=Cache-Control content=no-transform><meta http-equiv=Cache-Control content=no-siteapp><meta name=google-site-verification content=sNI58_0qBlj048P3M9VIK0edTYQ9zf2quRwRS7aNr2w><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel=stylesheet><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel=stylesheet><link href="/css/main.css?v=6.5.0" rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href="//avatars2.githubusercontent.com/u/24365000?s=460&v=4?v=6.5.0"><link rel=icon type=image/png sizes=32x32 href="//avatars2.githubusercontent.com/u/24365000?s=460&v=4?v=6.5.0"><link rel=icon type=image/png sizes=16x16 href="//avatars2.githubusercontent.com/u/24365000?s=460&v=4?v=6.5.0"><script id=hexo.configurations>var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"6.5.0",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!0,onmobile:!1},fancybox:!0,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!0,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"QPWKMZHLRX",apiKey:"2e8005a9fbd9bc631168be460716385a",indexName:"kingmui",hits:{per_page:10},labels:{input_placeholder:"输入关键字",hits_empty:"没有找到与 「${query}」 相关的内容",hits_stats:"共找到${hits}条相关记录，耗时 ${time} ms"}}}</script><meta name=description content="SEO 优化给你的 hexo 站点添加 sitemap 网站地图 安装 hexo 的 sitemap 网站地图生成插件  12npm install hexo-generator-sitemap --savenpm install hexo-generator-baidu-sitemap --save  在你的 hexo 站点的 _config.yml 文件中添加以下代码  12345# hexo"><meta name=keywords content=Hexo><meta property=og:type content=article><meta property=og:title content=Hexo个性化配置><meta property=og:url content=http://www.kingmui.cn/2016/11/24/Hexo个性化配置/index.html><meta property=og:site_name content=梦里有诗和远方><meta property=og:description content="SEO 优化给你的 hexo 站点添加 sitemap 网站地图 安装 hexo 的 sitemap 网站地图生成插件  12npm install hexo-generator-sitemap --savenpm install hexo-generator-baidu-sitemap --save  在你的 hexo 站点的 _config.yml 文件中添加以下代码  12345# hexo"><meta property=og:locale content=zh-CN><meta property=og:updated_time content=2019-04-05T11:06:59.481Z><meta name=twitter:card content=summary><meta name=twitter:title content=Hexo个性化配置><meta name=twitter:description content="SEO 优化给你的 hexo 站点添加 sitemap 网站地图 安装 hexo 的 sitemap 网站地图生成插件  12npm install hexo-generator-sitemap --savenpm install hexo-generator-baidu-sitemap --save  在你的 hexo 站点的 _config.yml 文件中添加以下代码  12345# hexo"><link rel=alternate href=/atom.xml title=梦里有诗和远方 type=application/atom+xml><link rel=canonical href=http://www.kingmui.cn/2016/11/24/Hexo个性化配置/ ><script id=page.configurations>CONFIG.page={sidebar:""}</script><title>Hexo个性化配置 | 梦里有诗和远方</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-116303188-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-116303188-1")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?65b6c252e87243b9ea8427abb6b8cf3e";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype=http://schema.org/WebPage lang=zh-CN><div class="container sidebar-position-left page-post-detail"><div class=headband></div><header id=header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-wrapper><div class=site-meta><div class=custom-logo-site-title><a href=/ class=brand rel=start><span class=logo-line-before><i></i></span> <span class=site-title>梦里有诗和远方</span><span class=logo-line-after><i></i></span></a></div><h1 class=site-subtitle itemprop=description>用艺术的眼光发现技术的美</h1></div><div class=site-nav-toggle><button aria-label=切换导航栏><span class=btn-bar></span><span class=btn-bar></span><span class=btn-bar></span></button></div></div><nav class=site-nav><ul id=menu class=menu><li class="menu-item menu-item-home"><a href=/ rel=section><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-tags"><a href=/tags/ rel=section><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签<span class=badge>15</span></a></li><li class="menu-item menu-item-archives"><a href=/archives/ rel=section><i class="menu-item-icon fa fa-fw fa-file-archive-o"></i><br>归档<span class=badge>24</span></a></li><li class="menu-item menu-item-resume"><a href=/resume rel=section><i class="menu-item-icon fa fa-fw fa-user-secret"></i><br>简历</a></li><li class="menu-item menu-item-search"><a href=javascript:; class=popup-trigger><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class=site-search><div class="algolia-popup popup search-popup"><div class=algolia-search><div class=algolia-search-input-icon><i class="fa fa-search"></i></div><div class=algolia-search-input id=algolia-search-input></div></div><div class=algolia-results><div id=algolia-stats></div><div id=algolia-hits></div><div id=algolia-pagination class=algolia-pagination></div></div><span class=popup-btn-close><i class="fa fa-times-circle"></i></span></div></div></nav></div></header><main id=main class=main><div class=main-inner><div class=content-wrap><div id=content class=content><div id=posts class=posts-expand><div class=reading-progress-bar></div><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><div class=post-block><link itemprop=mainEntityOfPage href=http://www.kingmui.cn/2016/11/24/Hexo个性化配置/ ><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=name content="King Mui"><meta itemprop=description content=原来我和我的影子都在偷偷的哭泣><meta itemprop=image content="//avatars2.githubusercontent.com/u/24365000?s=460&v=4"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content=梦里有诗和远方></span><header class=post-header><h2 class=post-title itemprop="name headline">Hexo个性化配置</h2><div class=post-meta><span class=post-time><span class=post-meta-item-icon><i class="fa fa-calendar-o"></i></span> <span class=post-meta-item-text>发表于</span> <time title="创建时间：2016-11-24 19:17:46" itemprop="dateCreated datePublished" datetime=2016-11-24T19:17:46+08:00>2016-11-24</time> <span class=post-meta-divider>|</span><span class=post-meta-item-icon><i class="fa fa-calendar-check-o"></i></span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2019-04-05 19:06:59" itemprop=dateModified datetime=2019-04-05T19:06:59+08:00>2019-04-05</time></span> <span class=post-meta-divider>|</span><span class=post-meta-item-icon><i class="fa fa-eye"></i> 阅读次数：<span class=busuanzi-value id=busuanzi_value_page_pv></span></span></div></header><div class=post-body itemprop=articleBody><h3 id=SEO-优化><a href=#SEO-优化 class=headerlink title="SEO 优化"></a>SEO 优化</h3><h4 id=给你的-hexo-站点添加-sitemap-网站地图><a href=#给你的-hexo-站点添加-sitemap-网站地图 class=headerlink title="给你的 hexo 站点添加 sitemap 网站地图"></a>给你的 hexo 站点添加 sitemap 网站地图</h4><ol><li>安装 hexo 的 sitemap 网站地图生成插件</li></ol><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-generator-sitemap --save</span><br><span class=line>npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure><ol start=2><li>在你的 hexo 站点的 <code>_config.yml</code> 文件中添加以下代码</li></ol><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line><span class=comment># hexo sitemap网站地图</span></span><br><span class=line>sitemap:</span><br><span class=line>  path: sitemap.xml</span><br><span class=line>baidusitemap:</span><br><span class=line>  path: baidusitemap.xml</span><br></pre></td></tr></table></figure><ol start=3><li><p>配置成功后，hexo 编译时会在 hexo 站点根目录生成 <code>sitemap.xml</code> 和 <code>baidusitemap.xml</code>。<br>其中 <code>sitemap.xml</code> 适合提交给谷歌搜素引擎，<code>baidusitemap.xml</code> 适合提交百度搜索引擎。</p></li><li><p>给你的 hexo 网站添加蜘蛛协议 <code>robots.txt</code>。把 <code>robots.txt</code> 放在你的 hexo 站点的 <code>source</code> 文件下即可。代码如下：</p></li></ol><a id=more></a><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line><span class=comment># hexo robots.txt</span></span><br><span class=line>User-agent: *</span><br><span class=line>Allow: /</span><br><span class=line>Allow: /archives/</span><br><span class=line></span><br><span class=line>Disallow: /vendors/</span><br><span class=line>Disallow: /js/</span><br><span class=line>Disallow: /css/</span><br><span class=line>Disallow: /fonts/</span><br><span class=line>Disallow: /vendors/</span><br><span class=line>Disallow: /fancybox/</span><br><span class=line></span><br><span class=line>Sitemap: http://www.kingmui.cn/sitemap.xml</span><br><span class=line>Sitemap: http://www.kingmui.cn/baidusitemap.xml</span><br></pre></td></tr></table></figure><ol start=5><li>主动推送 Hexo 博客新链接至百度搜索引擎<br>为了解决百度爬虫被禁止访问的问题，提升网站收录质量和速度。推荐安装 <span class=exturl data-url=aHR0cHM6Ly9naXRodWIuY29tL2h1aXdhbmcvaGV4by1iYWlkdS11cmwtc3VibWl0 title=https://github.com/huiwang/hexo-baidu-url-submit>hexo-baidu-url-submit<i class="fa fa-external-link"></i></span></li></ol><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre></td><td class=code><pre><span class=line><span class=comment># baidu_url_submit 配置</span></span><br><span class=line>baidu_url_submit:</span><br><span class=line>  count: 1000 <span class=comment>## 提交最新的一个链接</span></span><br><span class=line>  host: alili.tech <span class=comment>## 在百度站长平台中注册的域名</span></span><br><span class=line>  token: xxxxx <span class=comment>## 请注意这是您的秘钥， 所以请不要把博客源代码发布在公众仓库里!</span></span><br><span class=line>  path: baidu_urls.txt <span class=comment>## 文本文档的地址， 新链接会保存在此文本文档里</span></span><br><span class=line>  xz_appid: <span class=string>'xxxxxx'</span> <span class=comment>## 你的熊掌号 appid</span></span><br><span class=line>  xz_token: <span class=string>'xxxxxx'</span> <span class=comment>## 你的熊掌号 token</span></span><br><span class=line>  xz_count: 10 <span class=comment>## 从所有的提交的数据当中选取最新的10条,该数量跟你的熊掌号而定</span></span><br><span class=line><span class=comment># deploy 配置</span></span><br><span class=line>deploy:</span><br><span class=line>- <span class=built_in>type</span>: baidu_url_submitter <span class=comment># 百度</span></span><br><span class=line>- <span class=built_in>type</span>: baidu_xz_url_submitter <span class=comment># 百度熊掌号</span></span><br></pre></td></tr></table></figure><h4 id=给非友情链接的出站链接添加-“nofollow”-标签><a href=#给非友情链接的出站链接添加-“nofollow”-标签 class=headerlink title="给非友情链接的出站链接添加 “nofollow” 标签"></a>给非友情链接的出站链接添加 “nofollow” 标签</h4><p>经过 chinaz 站长工具友情链接检测，发现有不必要的 PR 值输出，对于非友情链接的 PR 值输出，我们可以加上 nofollow 便签避免不必要的 PR 输出。这里推荐使用 <span class=exturl data-url=aHR0cHM6Ly9naXRodWIuY29tL2xpdXpjL2hleG8tYXV0b25vZm9sbG93 title=https://github.com/liuzc/hexo-autonofollow>hexo-autonofollow<i class="fa fa-external-link"></i></span>，它会自动将 nofollow 属性添加到 hexo 博客文章中的所有外部链接。 配置如下：</p><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line>nofollow:</span><br><span class=line>  <span class=built_in>enable</span>: <span class=literal>true</span></span><br><span class=line>  exclude:</span><br><span class=line>    - kingmui.cn</span><br></pre></td></tr></table></figure><h3 id=域名解析><a href=#域名解析 class=headerlink title=域名解析></a>域名解析</h3><p>由于 Github Pages 是有限制的，它不允许任意域名都跳转过来，而是只限制一个域名，而且这个域名必须声明在 CNAME 文件中。所以，我们需要添加一个 CNAME 文件到项目的 master 中才行。我们使用 <span class=exturl data-url=aHR0cHM6Ly9naXRodWIuY29tL2xlZWNyb3NzbGV5L2hleG8tZ2VuZXJhdG9yLWNuYW1l title=https://github.com/leecrossley/hexo-generator-cname>hexo-generator-cname<i class="fa fa-external-link"></i></span> 来自动在 public 里生成一个 CNAME 文件！</p><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=comment># 注意：只需安装即可，不要在 _config.yml 启用</span></span><br><span class=line>npm install hexo-generator-cname --save</span><br></pre></td></tr></table></figure><h3 id=RSS-订阅><a href=#RSS-订阅 class=headerlink title="RSS 订阅"></a>RSS 订阅</h3><p>目前很多人喜欢用 RSS 阅读器来实时更新某些作者的文章。这里我们利用插件 <span class=exturl data-url=aHR0cHM6Ly9naXRodWIuY29tL2hleG9qcy9oZXhvLWdlbmVyYXRvci1mZWVk title=https://github.com/hexojs/hexo-generator-feed>hexo-generator-feed<i class="fa fa-external-link"></i></span> 来实现这个功能。</p><ol><li>安装</li></ol><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install hexo-generator-feed –save</span><br></pre></td></tr></table></figure><ol start=2><li>修改 <code>_config.yml</code>，具体设置可以参考官方链接里的指示</li></ol><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line>feed:</span><br><span class=line>  <span class=built_in>type</span>: atom</span><br><span class=line>  path: atom.xml</span><br><span class=line>  <span class=built_in>limit</span>: 20</span><br><span class=line>  hub:</span><br><span class=line>  content:</span><br><span class=line>  content_limit: 140</span><br><span class=line>  content_limit_delim: <span class=string>' '</span></span><br><span class=line>  order_by: -date</span><br></pre></td></tr></table></figure><ol start=3><li>在 themes/next/_config.yml 里的 menu 添加 <code>rss: /atom.xml</code></li><li>在 themes/next/languages/zh-CN.yml 里的 <code>menu</code> 添加中文翻译 <code>rss: RSS</code></li></ol><h3 id=个人简历页面><a href=#个人简历页面 class=headerlink title=个人简历页面></a>个人简历页面</h3><p>对于一个优秀的博主而言，每天会有很多开发者进入到他的博客。<br>而无论出于职业生涯还是个人影响力的角度考虑，在博客里放置个人简历是一个很好的展示自己的机会。<br>下面我们来利用 hexo 的 page 功能来创建一个新页面，然后用 markdown 来填充这个简历页面。</p><ol><li>利用 <code>hexo new page &quot;resume&quot;</code>，可以看到 <code>source</code> 文件夹下出现了 <code>resume</code> 目录，里面有一个 <code>index.md</code> 文件；</li><li>在 <code>themes/next/_config.yml</code> 里的 <code>menu:</code> 下添加 <code>resume: /resume</code>，它会在首页创建一个新的 menu: resume 入口；</li><li>在 <code>index.md</code> 文件里填写自己的简历即可。</li></ol><h3 id=修改文章内链接的样式><a href=#修改文章内链接的样式 class=headerlink title=修改文章内链接的样式></a>修改文章内链接的样式</h3><p>修改路径：<code>themes/next/sources/css/_common/components/post/post.styl</code></p><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line>.post-body span.exturl &#123;</span><br><span class=line>  color: #0593d3;</span><br><span class=line>  border-bottom: none;</span><br><span class=line>  border-bottom: 1px solid #0593d3;</span><br><span class=line>  &amp;:hover &#123;</span><br><span class=line>    color: #fc6423;</span><br><span class=line>    border-bottom: none;</span><br><span class=line>    border-bottom: 1px solid #fc6423;</span><br><span class=line>  &#125;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure><h3 id=修改文章后面标签的图标><a href=#修改文章后面标签的图标 class=headerlink title=修改文章后面标签的图标></a>修改文章后面标签的图标</h3><p>修改模板 <code>themes/next/layout/_macro/post.swig</code></p><figure class="highlight html"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=comment>&lt;!-- 修改前 --&gt;</span></span><br><span class=line><span class=tag>&lt;<span class=name>a</span> <span class=attr>href</span>=<span class=string>"&#123;&#123; url_for(tag.path) &#125;&#125;"</span> <span class=attr>rel</span>=<span class=string>"tag"</span>&gt;</span># &#123;&#123; tag.name &#125;&#125;<span class=tag>&lt;/<span class=name>a</span>&gt;</span></span><br><span class=line><span class=comment>&lt;!-- 修改后 --&gt;</span></span><br><span class=line><span class=tag>&lt;<span class=name>a</span> <span class=attr>href</span>=<span class=string>"&#123;&#123; url_for(tag.path) &#125;&#125;"</span> <span class=attr>rel</span>=<span class=string>"tag"</span>&gt;</span><span class=tag>&lt;<span class=name>i</span> <span class=attr>class</span>=<span class=string>"fa fa-tags"</span>&gt;</span><span class=tag>&lt;/<span class=name>i</span>&gt;</span> &#123;&#123; tag.name &#125;&#125;<span class=tag>&lt;/<span class=name>a</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id=文末感谢大家的阅读><a href=#文末感谢大家的阅读 class=headerlink title=文末感谢大家的阅读!></a>文末感谢大家的阅读!</h3><ol><li>在 <code>/themes/next/layout/_macro</code> 下新建文件 <code>passage-end-tag.swig</code>，并且添加如下内容：</li></ol><figure class="highlight html"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line><span class=tag>&lt;<span class=name>div</span>&gt;</span></span><br><span class=line>  &#123;% if not is_index %&#125;</span><br><span class=line>  <span class=tag>&lt;<span class=name>div</span> <span class=attr>style</span>=<span class=string>"text-align:center;color: #ccc;font-size:14px;"</span>&gt;</span>-------------本文结束<span class=tag>&lt;<span class=name>i</span> <span class=attr>class</span>=<span class=string>"fa fa-paw"</span>&gt;</span><span class=tag>&lt;/<span class=name>i</span>&gt;</span>感谢您的阅读!-------------<span class=tag>&lt;/<span class=name>div</span>&gt;</span></span><br><span class=line>  &#123;% endif %&#125;</span><br><span class=line><span class=tag>&lt;/<span class=name>div</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start=2><li>添加到 <code>themes/next/lauyout/_macro/post.swig</code> 文件中</li></ol><figure class="highlight html"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=comment>&lt;!-- 在 END POST BODY 下面添加如下代码 --&gt;</span></span><br><span class=line>&#123;% if theme.passage_end_tag.enabled and not is_index %&#125;</span><br><span class=line><span class=tag>&lt;<span class=name>div</span>&gt;</span>&#123;% include 'passage-end-tag.swig' %&#125;<span class=tag>&lt;/<span class=name>div</span>&gt;</span></span><br><span class=line>&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><h3 id=文章底部添加版权信息><a href=#文章底部添加版权信息 class=headerlink title=文章底部添加版权信息></a>文章底部添加版权信息</h3><ol><li>在 <code>themes/next/layout/_macro</code> 目录下新建文件 <code>my-copyright.swig</code>，内容如下：</li></ol><figure class="highlight html"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre></td><td class=code><pre><span class=line>&#123;% if page.copyright %&#125;</span><br><span class=line><span class=tag>&lt;<span class=name>div</span> <span class=attr>class</span>=<span class=string>"my_post_copyright"</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;<span class=name>script</span> <span class=attr>src</span>=<span class=string>"//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"</span>&gt;</span><span class="undefined"></span><span class=tag>&lt;/<span class=name>script</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;<span class=name>script</span> <span class=attr>src</span>=<span class=string>"/lib/jquery/index.js?v=2.1.3"</span>&gt;</span><span class="undefined"></span><span class=tag>&lt;/<span class=name>script</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;<span class=name>script</span> <span class=attr>src</span>=<span class=string>"https://unpkg.com/sweetalert/dist/sweetalert.min.js"</span>&gt;</span><span class="undefined"></span><span class=tag>&lt;/<span class=name>script</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;<span class=name>p</span>&gt;</span><span class=tag>&lt;<span class=name>span</span>&gt;</span>本文标题:<span class=tag>&lt;/<span class=name>span</span>&gt;</span><span class=tag>&lt;<span class=name>a</span> <span class=attr>href</span>=<span class=string>"&#123;&#123; url_for(page.path) &#125;&#125;"</span>&gt;</span>&#123;&#123; page.title &#125;&#125;<span class=tag>&lt;/<span class=name>a</span>&gt;</span><span class=tag>&lt;/<span class=name>p</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;<span class=name>p</span>&gt;</span><span class=tag>&lt;<span class=name>span</span>&gt;</span>文章作者:<span class=tag>&lt;/<span class=name>span</span>&gt;</span><span class=tag>&lt;<span class=name>a</span> <span class=attr>href</span>=<span class=string>"/"</span> <span class=attr>title</span>=<span class=string>"访问 &#123;&#123; theme.author &#125;&#125; 的个人博客"</span>&gt;</span>&#123;&#123; theme.author &#125;&#125;<span class=tag>&lt;/<span class=name>a</span>&gt;</span><span class=tag>&lt;/<span class=name>p</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;<span class=name>p</span>&gt;</span><span class=tag>&lt;<span class=name>span</span>&gt;</span>发布时间:<span class=tag>&lt;/<span class=name>span</span>&gt;</span>&#123;&#123; page.date.format("YYYY年MM月DD日 - HH:MM") &#125;&#125;<span class=tag>&lt;/<span class=name>p</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;<span class=name>p</span>&gt;</span><span class=tag>&lt;<span class=name>span</span>&gt;</span>最后更新:<span class=tag>&lt;/<span class=name>span</span>&gt;</span>&#123;&#123; page.updated.format("YYYY年MM月DD日 - HH:MM") &#125;&#125;<span class=tag>&lt;/<span class=name>p</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;<span class=name>p</span>&gt;</span><span class=tag>&lt;<span class=name>span</span>&gt;</span>原始链接:<span class=tag>&lt;/<span class=name>span</span>&gt;</span><span class=tag>&lt;<span class=name>a</span> <span class=attr>href</span>=<span class=string>"&#123;&#123; url_for(page.path) &#125;&#125;"</span> <span class=attr>title</span>=<span class=string>"&#123;&#123; page.title &#125;&#125;"</span>&gt;</span>&#123;&#123; page.permalink &#125;&#125;<span class=tag>&lt;/<span class=name>a</span>&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>span</span> <span class=attr>class</span>=<span class=string>"copy-path"</span>  <span class=attr>title</span>=<span class=string>"点击复制文章链接"</span>&gt;</span><span class=tag>&lt;<span class=name>i</span> <span class=attr>class</span>=<span class=string>"fa fa-clipboard"</span> <span class=attr>data-clipboard-text</span>=<span class=string>"&#123;&#123; page.permalink &#125;&#125;"</span>  <span class=attr>aria-label</span>=<span class=string>"复制成功！"</span>&gt;</span><span class=tag>&lt;/<span class=name>i</span>&gt;</span><span class=tag>&lt;/<span class=name>span</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;/<span class=name>p</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;<span class=name>p</span>&gt;</span><span class=tag>&lt;<span class=name>span</span>&gt;</span>许可协议:<span class=tag>&lt;/<span class=name>span</span>&gt;</span><span class=tag>&lt;<span class=name>i</span> <span class=attr>class</span>=<span class=string>"fa fa-creative-commons"</span>&gt;</span><span class=tag>&lt;/<span class=name>i</span>&gt;</span> <span class=tag>&lt;<span class=name>a</span> <span class=attr>rel</span>=<span class=string>"license"</span> <span class=attr>href</span>=<span class=string>"https://creativecommons.org/licenses/by-nc-nd/4.0/"</span> <span class=attr>target</span>=<span class=string>"_blank"</span> <span class=attr>title</span>=<span class=string>"Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)"</span>&gt;</span>署名-非商业性使用-禁止演绎 4.0 国际<span class=tag>&lt;/<span class=name>a</span>&gt;</span> 转载请保留原文链接及作者。<span class=tag>&lt;/<span class=name>p</span>&gt;</span></span><br><span class=line><span class=tag>&lt;/<span class=name>div</span>&gt;</span></span><br><span class=line><span class=tag>&lt;<span class=name>script</span>&gt;</span><span class="undefined"></span></span><br><span class=line><span class=javascript>  <span class=keyword>var</span> clipboard = <span class=keyword>new</span> Clipboard(<span class=string>'.fa-clipboard'</span>);</span></span><br><span class=line><span class=javascript>  $(<span class=string>'.fa-clipboard'</span>).click(<span class=function><span class=keyword>function</span>(<span class=params></span>)</span>&#123;</span></span><br><span class=line><span class=javascript>  clipboard.on(<span class=string>'success'</span>, <span class=function><span class=keyword>function</span>(<span class=params></span>)</span>&#123;</span></span><br><span class=line><span class="undefined">    swal(&#123;</span></span><br><span class=line><span class=javascript>      title: <span class=string>""</span>,</span></span><br><span class=line><span class=javascript>      text: <span class=string>'复制成功'</span>,</span></span><br><span class=line><span class=javascript>      icon: <span class=string>"success"</span>,</span></span><br><span class=line><span class=javascript>      showConfirmButton: <span class=literal>true</span></span></span><br><span class=line><span class="undefined">      &#125;);</span></span><br><span class=line><span class="undefined">    &#125;);</span></span><br><span class=line><span class="undefined">  &#125;);</span></span><br><span class=line><span class="undefined"></span><span class=tag>&lt;/<span class=name>script</span>&gt;</span></span><br><span class=line>&#123;% endif %&#125;****</span><br></pre></td></tr></table></figure><ol start=2><li>在 <code>themes/next/source/css/_common/components/post/</code> 新建文件 <code>my-post-copyright.styl</code></li></ol><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br></pre></td><td class=code><pre><span class=line>.my_post_copyright &#123;</span><br><span class=line>  width: 85%;</span><br><span class=line>  max-width: 45em;</span><br><span class=line>  margin: 2.8em auto 0;</span><br><span class=line>  padding: 0.5em 1.0em;</span><br><span class=line>  border: 1px solid #d3d3d3;</span><br><span class=line>  font-size: 0.93rem;</span><br><span class=line>  line-height: 1.6em;</span><br><span class=line>  word-break: break-all;</span><br><span class=line>  background: rgba(255,255,255,0.4);</span><br><span class=line>&#125;</span><br><span class=line>.my_post_copyright p&#123;margin:0;&#125;</span><br><span class=line>.my_post_copyright span &#123;</span><br><span class=line>  display: inline-block;</span><br><span class=line>  width: 5.2em;</span><br><span class=line>  color: #b5b5b5;</span><br><span class=line>  font-weight: bold;</span><br><span class=line>&#125;</span><br><span class=line>.my_post_copyright .raw &#123;</span><br><span class=line>  margin-left: 1em;</span><br><span class=line>  width: 5em;</span><br><span class=line>&#125;</span><br><span class=line>.my_post_copyright a &#123;</span><br><span class=line>  color: #808080;</span><br><span class=line>  border-bottom:0;</span><br><span class=line>&#125;</span><br><span class=line>.my_post_copyright a:hover &#123;</span><br><span class=line>  color: #a3d2a3;</span><br><span class=line>  text-decoration: underline;</span><br><span class=line>&#125;</span><br><span class=line>.my_post_copyright:hover .fa-clipboard &#123;</span><br><span class=line>  color: #000;</span><br><span class=line>&#125;</span><br><span class=line>.my_post_copyright .post-url:hover &#123;</span><br><span class=line>  font-weight: normal;</span><br><span class=line>&#125;</span><br><span class=line>.my_post_copyright .copy-path &#123;</span><br><span class=line>  margin-left: 1em;</span><br><span class=line>  width: 1em;</span><br><span class=line>  +mobile()&#123;display:none;&#125;</span><br><span class=line>&#125;</span><br><span class=line>.my_post_copyright .copy-path:hover &#123;</span><br><span class=line>  color: #808080;</span><br><span class=line>  cursor: pointer;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure><ol start=3><li>修改 <code>next/layout/_macro/post.swig</code> 文件，添加如下代码：</li></ol><figure class="highlight html"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>&#123;% if not is_index %&#125;</span><br><span class=line><span class=tag>&lt;<span class=name>div</span>&gt;</span>&#123;% include 'my-copyright.swig' %&#125;<span class=tag>&lt;/<span class=name>div</span>&gt;</span></span><br><span class=line>&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><ol start=4><li>修改 <code>next/sources/css/_common/components/post/post.styl</code> 文件，添加如下代码：</li></ol><figure class="highlight css"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>@<span class=keyword>import</span> <span class=string>'my-post-copyright'</span>;</span><br></pre></td></tr></table></figure><ol start=5><li>若文章需要版权声明可添加 <code>copyright: true</code>。</li></ol><h3 id=Algolia-搜索服务><a href=#Algolia-搜索服务 class=headerlink title="Algolia 搜索服务"></a>Algolia 搜索服务</h3><ol><li><p>前往 <span class=exturl data-url=aHR0cHM6Ly93d3cuYWxnb2xpYS5jb20v title=https://www.algolia.com/ >Algolia 注册页面<i class="fa fa-external-link"></i></span>，注册一个新账户。 可以使用 GitHub 或者 Google 账户直接登录，注册后的 14 天内拥有所有功能（包括收费类别的）。之后若未续费会自动降级为免费账户，免费账户 总共有 10,000 条记录，每月有 100,000 的可以操作数。注册完成后，创建一个新的 Index，这个 Index 将在后面使用。</p></li><li><p>Index 创建完成后，此时这个 Index 里未包含任何数据。 接下来需要安装 Hexo Algolia 扩展， 这个扩展的功能是搜集站点的内容并通过 API 发送给 Algolia。前往站点根目录，执行命令安装：</p></li></ol><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>npm install --save hexo-algolia</span><br></pre></td></tr></table></figure><ol start=3><li>在 Algolia 服务站点上找到需要使用的一些配置的值，包括 ApplicationID、Search-Only API Key、 Admin API Key。注意，Admin API Key 需要保密保存。点击 ALL API KEYS 找到新建 INDEX 对应的 key， 编辑权限，在弹出框中找到 ACL 选择勾选 Add records, Delete records, List indices, Delete index 权限，点击 update 更新。</li></ol><p>编辑 <code>站点配置文件</code>，新增以下配置：</p><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line><span class=comment># 替换除了 chunkSize 以外的其他字段为在 Algolia 获取到的值。</span></span><br><span class=line>algolia:</span><br><span class=line>  applicationID: <span class=string>'applicationID'</span></span><br><span class=line>  indexName: <span class=string>'indexName'</span></span><br><span class=line>  chunkSize: 5000</span><br></pre></td></tr></table></figure><ol start=4><li>当配置完成，在站点根目录下执行</li></ol><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line><span class=built_in>export</span>(windows 为 <span class=built_in>set</span>) HEXO_ALGOLIA_INDEXING_KEY=Search-Only API key</span><br><span class=line>hexo clean</span><br><span class=line>hexo algolia</span><br></pre></td></tr></table></figure><p>来更新 Index。请注意观察命令的输出。</p><ol start=5><li>更改主题配置文件，找到 Algolia Search 配置部分：</li></ol><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line><span class=comment># Algolia Search</span></span><br><span class=line>algolia_search:</span><br><span class=line>  <span class=built_in>enable</span>: <span class=literal>true</span></span><br><span class=line>  hits:</span><br><span class=line>    per_page: 10</span><br><span class=line>  labels:</span><br><span class=line>    input_placeholder: Search <span class=keyword>for</span> Posts</span><br><span class=line>    hits_empty: <span class=string>"We didn't find any results for the search: <span class=variable>$&#123;query&#125;</span>"</span></span><br><span class=line>    hits_stats: <span class=string>"<span class=variable>$&#123;hits&#125;</span> results found in <span class=variable>$&#123;time&#125;</span> ms"</span></span><br></pre></td></tr></table></figure><h3 id=DaoVoice-实现在线联系><a href=#DaoVoice-实现在线联系 class=headerlink title="DaoVoice 实现在线联系"></a>DaoVoice 实现在线联系</h3><ol><li><span class=exturl data-url="aHR0cDovL2Rhc2hib2FyZC5kYW92b2ljZS5pby9nZXQtc3RhcnRlZD9pbnZpdGVfY29kZT0yNTZjYzhiZA==" title="http://dashboard.daovoice.io/get-started?invite_code=256cc8bd">注册登录<i class="fa fa-external-link"></i></span>填写邀请码（256cc8bd）。<br>完成注册后，修改 <code>themes/next/layout/_partials/head.swig</code> 添加下面的代码:</li></ol><figure class="highlight html"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre></td><td class=code><pre><span class=line>&#123;% if theme.daovoice %&#125;</span><br><span class=line><span class=tag>&lt;<span class=name>script</span>&gt;</span><span class="undefined"></span></span><br><span class=line><span class=javascript>  (<span class=function><span class=keyword>function</span>(<span class=params>i, s, o, g, r, a, m</span>) </span>&#123;</span></span><br><span class=line><span class=javascript>    i[<span class=string>'DaoVoiceObject'</span>] = r;</span></span><br><span class=line><span class="undefined">    (i[r] =</span></span><br><span class=line><span class="undefined">      i[r] ||</span></span><br><span class=line><span class=javascript>      <span class=function><span class=keyword>function</span>(<span class=params></span>) </span>&#123;</span></span><br><span class=line><span class=javascript>        (i[r].q = i[r].q || []).push(<span class=built_in>arguments</span>);</span></span><br><span class=line><span class="undefined">      &#125;),</span></span><br><span class=line><span class=javascript>      (i[r].l = <span class=number>1</span> * <span class=keyword>new</span> <span class=built_in>Date</span>());</span></span><br><span class=line><span class="undefined">    (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);</span></span><br><span class=line><span class="undefined">    a.async = 1;</span></span><br><span class=line><span class="undefined">    a.src = g;</span></span><br><span class=line><span class=javascript>    a.charset = <span class=string>'utf-8'</span>;</span></span><br><span class=line><span class="undefined">    m.parentNode.insertBefore(a, m);</span></span><br><span class=line><span class=javascript>  &#125;)(<span class=built_in>window</span>, <span class=built_in>document</span>, <span class=string>'script'</span>, (<span class=string>'https:'</span> == <span class=built_in>document</span>.location.protocol ? <span class=string>'https:'</span> : <span class=string>'http:'</span>) + <span class=string>'//widget.daovoice.io/widget/&#123;&#123;theme.daovoice_app_id&#125;&#125;.js'</span>, <span class=string>'daovoice'</span>);</span></span><br><span class=line><span class=javascript>  daovoice(<span class=string>'init'</span>, &#123;</span></span><br><span class=line><span class=javascript>    app_id: <span class=string>'&#123;&#123;theme.daovoice_app_id&#125;&#125;'</span></span></span><br><span class=line><span class="undefined">  &#125;);</span></span><br><span class=line><span class=javascript>  daovoice(<span class=string>'update'</span>);</span></span><br><span class=line><span class="undefined"></span><span class=tag>&lt;/<span class=name>script</span>&gt;</span></span><br><span class=line>&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><ol start=2><li>修改主题的配置文件</li></ol><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line><span class=comment># Online contact</span></span><br><span class=line>daovoice: <span class=literal>true</span></span><br><span class=line>daovoice_app_id: 我们注册获取的id</span><br></pre></td></tr></table></figure><h3 id=添加腾讯空间-404-公益页面><a href=#添加腾讯空间-404-公益页面 class=headerlink title="添加腾讯空间 404 公益页面"></a>添加腾讯空间 404 公益页面</h3><p>新建 <code>404.html</code> 页面，将下面代码拷进去保存，放到主题的 <code>source</code> 目录下即可：</p><figure class="highlight html"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&lt;!DOCTYPE html&gt;</span></span><br><span class=line><span class=tag>&lt;<span class=name>html</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;<span class=name>head</span>&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>title</span>&gt;</span>404公益页面-宝贝回家志愿者协会-梦里有诗和远方<span class=tag>&lt;/<span class=name>title</span>&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>meta</span> <span class=attr>http-equiv</span>=<span class=string>"content-type"</span> <span class=attr>content</span>=<span class=string>"text/html;charset=utf-8;"</span> /&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>meta</span> <span class=attr>http-equiv</span>=<span class=string>"X-UA-Compatible"</span> <span class=attr>content</span>=<span class=string>"IE=edge,chrome=1"</span> /&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>meta</span> <span class=attr>name</span>=<span class=string>"robots"</span> <span class=attr>content</span>=<span class=string>"all"</span> /&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>meta</span> <span class=attr>name</span>=<span class=string>"robots"</span> <span class=attr>content</span>=<span class=string>"index,follow"</span> /&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>link</span> <span class=attr>rel</span>=<span class=string>"apple-touch-icon"</span> <span class=attr>sizes</span>=<span class=string>"180x180"</span> <span class=attr>href</span>=<span class=string>"//avatars2.githubusercontent.com/u/24365000?s=460&amp;v=4?v=6.5.0"</span> /&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>link</span> <span class=attr>rel</span>=<span class=string>"icon"</span> <span class=attr>type</span>=<span class=string>"image/png"</span> <span class=attr>sizes</span>=<span class=string>"32x32"</span> <span class=attr>href</span>=<span class=string>"//avatars2.githubusercontent.com/u/24365000?s=460&amp;v=4?v=6.5.0"</span> /&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>link</span> <span class=attr>rel</span>=<span class=string>"icon"</span> <span class=attr>type</span>=<span class=string>"image/png"</span> <span class=attr>sizes</span>=<span class=string>"16x16"</span> <span class=attr>href</span>=<span class=string>"//avatars2.githubusercontent.com/u/24365000?s=460&amp;v=4?v=6.5.0"</span> /&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>link</span> <span class=attr>rel</span>=<span class=string>"stylesheet"</span> <span class=attr>type</span>=<span class=string>"text/css"</span> <span class=attr>href</span>=<span class=string>"https://qzone.qq.com/gy/404/style/404style.css"</span> /&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>style</span>&gt;</span><span class="undefined"></span></span><br><span class=line><span class=css>      <span class=selector-class>.mod_404</span> <span class=selector-class>.desc</span> <span class=selector-class>.desc_link</span> &#123;</span></span><br><span class=line><span class="undefined">        text-decoration: none !important;</span></span><br><span class=line><span class=css>        <span class=selector-tag>color</span>: <span class=selector-id>#4599ff</span>;</span></span><br><span class=line><span class="undefined">      &#125;</span></span><br><span class=line><span class=css>      <span class=selector-class>.mod_404</span> <span class=selector-class>.desc</span> <span class=selector-class>.desc_link</span><span class=selector-pseudo>:hover</span> &#123;</span></span><br><span class=line><span class=css>        <span class=selector-tag>color</span>: <span class=selector-id>#2e8cff</span>;</span></span><br><span class=line><span class="undefined">      &#125;</span></span><br><span class=line><span class="undefined">    </span><span class=tag>&lt;/<span class=name>style</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;/<span class=name>head</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;<span class=name>body</span>&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>script</span> <span class=attr>type</span>=<span class=string>"text/plain"</span> <span class=attr>src</span>=<span class=string>"https://www.qq.com/404/search_children.js"</span> <span class=attr>charset</span>=<span class=string>"utf-8"</span> <span class=attr>homePageUrl</span>=<span class=string>"/"</span> <span class=attr>homePageName</span>=<span class=string>"回到我的主页"</span>&gt;</span><span class="undefined"></span><span class=tag>&lt;/<span class=name>script</span>&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>script</span> <span class=attr>src</span>=<span class=string>"https://qzone.qq.com/gy/404/data.js"</span> <span class=attr>charset</span>=<span class=string>"utf-8"</span>&gt;</span><span class="undefined"></span><span class=tag>&lt;/<span class=name>script</span>&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>script</span> <span class=attr>src</span>=<span class=string>"https://qzone.qq.com/gy/404/page.js"</span> <span class=attr>charset</span>=<span class=string>"utf-8"</span>&gt;</span><span class="undefined"></span><span class=tag>&lt;/<span class=name>script</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;/<span class=name>body</span>&gt;</span></span><br><span class=line><span class=tag>&lt;/<span class=name>html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id=利用-Gulp-压缩代码><a href=#利用-Gulp-压缩代码 class=headerlink title="利用 Gulp 压缩代码"></a>利用 Gulp 压缩代码</h3><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>let</span> gulp = <span class=built_in>require</span>(<span class=string>'gulp'</span>),</span><br><span class=line>  imageminPngquant = <span class=built_in>require</span>(<span class=string>'imagemin-pngquant'</span>),</span><br><span class=line>  $ = <span class=built_in>require</span>(<span class=string>'gulp-load-plugins'</span>)();</span><br><span class=line></span><br><span class=line><span class=comment>// 压缩 html</span></span><br><span class=line>gulp.task(<span class=string>'html'</span>, <span class=function><span class=keyword>function</span>(<span class=params></span>) </span>&#123;</span><br><span class=line>  <span class=keyword>return</span> gulp</span><br><span class=line>    .src(<span class=string>'./public/**/*.html'</span>)</span><br><span class=line>    .pipe($.htmlclean())</span><br><span class=line>    .pipe(</span><br><span class=line>      $.htmlmin(&#123;</span><br><span class=line>        collapseWhitespace: <span class=literal>true</span>, <span class=comment>// 折叠有助于文档树中文本节点的空白区域</span></span><br><span class=line>        minifyCSS: <span class=literal>true</span>,</span><br><span class=line>        minifyJS: <span class=literal>true</span>,</span><br><span class=line>        minifyURLs: <span class=literal>true</span>, <span class=comment>// 使用 relatedurl 压缩各种属性中的 URL</span></span><br><span class=line>        keepClosingSlash: <span class=literal>true</span>, <span class=comment>// 单标签保留尾部斜杠</span></span><br><span class=line>        removeAttributeQuotes: <span class=literal>true</span>, <span class=comment>// 尽可能删除属性周围的引号</span></span><br><span class=line>        removeEmptyAttributes: <span class=literal>true</span>, <span class=comment>// 删除所有空格作属性值</span></span><br><span class=line>        removeComments: <span class=literal>true</span>, <span class=comment>// 清除HTML注释</span></span><br><span class=line>        removeScriptTypeAttributes: <span class=literal>true</span>,</span><br><span class=line>        removeStyleLinkTypeAttributes: <span class=literal>true</span>,</span><br><span class=line>        useShortDoctype: <span class=literal>true</span></span><br><span class=line>      &#125;)</span><br><span class=line>    )</span><br><span class=line>    .pipe(gulp.dest(<span class=string>'./public'</span>));</span><br><span class=line>&#125;);</span><br><span class=line></span><br><span class=line><span class=comment>// 压缩图片</span></span><br><span class=line>gulp.task(<span class=string>'image'</span>, () =&gt; &#123;</span><br><span class=line>  <span class=keyword>return</span> gulp</span><br><span class=line>    .src(<span class=string>'./public/images/*'</span>)</span><br><span class=line>    .pipe(</span><br><span class=line>      $.cache(</span><br><span class=line>        $.imagemin(&#123;</span><br><span class=line>          interlaced: <span class=literal>true</span>,</span><br><span class=line>          progressive: <span class=literal>true</span>,</span><br><span class=line>          optimizationLevel: <span class=number>5</span>,</span><br><span class=line>          svgoPlugins: [&#123; <span class=attr>removeViewBox</span>: <span class=literal>true</span> &#125;],</span><br><span class=line>          <span class=comment>// 使用pngquant深度压缩png图片的imagemin插件</span></span><br><span class=line>          use: [imageminPngquant()]</span><br><span class=line>        &#125;)</span><br><span class=line>      )</span><br><span class=line>    )</span><br><span class=line>    .pipe(gulp.dest(<span class=string>'./public/images/'</span>));</span><br><span class=line>&#125;);</span><br><span class=line></span><br><span class=line><span class=comment>// 清除缓存</span></span><br><span class=line>gulp.task(<span class=string>'clearCache'</span>, () =&gt; $.cache.clearAll());</span><br><span class=line></span><br><span class=line><span class=comment>// 压缩 css</span></span><br><span class=line><span class=comment>// gulp.task('css', function() &#123;</span></span><br><span class=line><span class=comment>//     return gulp.src('./public/**/*.css')</span></span><br><span class=line><span class=comment>//         .pipe($.cleanCss(&#123;compatibility: 'ie8', debug: true&#125;, (details) =&gt; &#123;</span></span><br><span class=line><span class=comment>//             console.log(`$&#123;details.name&#125;: $&#123;details.stats.originalSize&#125;`);</span></span><br><span class=line><span class=comment>//             console.log(`$&#123;details.name&#125;: $&#123;details.stats.minifiedSize&#125;`);</span></span><br><span class=line><span class=comment>//           &#125;))</span></span><br><span class=line><span class=comment>//         .pipe(gulp.dest('./public'));</span></span><br><span class=line><span class=comment>// &#125;);</span></span><br><span class=line></span><br><span class=line><span class=comment>// 压缩 js</span></span><br><span class=line><span class=comment>// gulp.task('js', function() &#123;</span></span><br><span class=line><span class=comment>//     return gulp.src('./public/**/*.js')</span></span><br><span class=line><span class=comment>//         .pipe($.uglify())</span></span><br><span class=line><span class=comment>//         .pipe(gulp.dest('./public'));</span></span><br><span class=line><span class=comment>// &#125;);</span></span><br><span class=line></span><br><span class=line><span class=comment>// 执行 gulp 命令时执行的任务</span></span><br><span class=line>gulp.task(<span class=string>'default'</span>, [<span class=string>'html'</span>]);</span><br></pre></td></tr></table></figure></div><div><div><div style=text-align:center;color:#ccc;font-size:14px>-------------本文结束<i class="fa fa-paw"></i> 感谢您的阅读-------------</div></div></div><div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>谢谢你请我吃糖果！</div><button id=rewardButton disable=enable onclick='var qr=document.getElementById("QR");"none"===qr.style.display?qr.style.display="block":qr.style.display="none"'><span>打赏</span></button><div id=QR style=display:none><div id=wechat style=display:inline-block><img id=wechat_qr src=/images/wechatpay.jpg alt="King Mui 微信支付"><p>微信支付</p></div><div id=alipay style=display:inline-block><img id=alipay_qr src=/images/alipay.jpg alt="King Mui 支付宝"><p>支付宝</p></div></div></div></div><footer class=post-footer><div class=post-tags><a href=/tags/Hexo/ rel=tag><i class="fa fa-tags"></i> Hexo</a></div><div class=post-nav><div class="post-nav-next post-nav-item"></div><span class=post-nav-divider></span><div class="post-nav-prev post-nav-item"><a href=/2017/10/22/使用CSS3补间动画实现移动Web轮播图/ rel=prev title=使用CSS3补间动画实现移动Web轮播图>使用CSS3补间动画实现移动Web轮播图<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class=comments id=comments><div id=lv-container data-id=city data-uid=MTAyMC8zNTE2MS8xMTY5Ng></div></div></div><div class=sidebar-toggle><div class=sidebar-toggle-line-wrap><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id=sidebar class=sidebar><div class=sidebar-inner><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target=post-toc-wrap>文章目录</li><li class=sidebar-nav-overview data-target=site-overview-wrap>站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class=site-overview><div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image src="//avatars2.githubusercontent.com/u/24365000?s=460&v=4" alt="King Mui"><p class=site-author-name itemprop=name>King Mui</p><p class="site-description motion-element" itemprop=description>原来我和我的影子都在偷偷的哭泣</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href=/archives/ ><span class=site-state-item-count>24</span> <span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/index.html><span class=site-state-item-count>15</span> <span class=site-state-item-name>标签</span></a></div></nav><div class="feed-link motion-element"><a href=/atom.xml rel=alternate><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class=links-of-author-item><span class=exturl data-url="aHR0cHM6Ly9naXRodWIuY29tL2tpbmdtdWk=" title="GitHub &rarr; https://github.com/kingmui"><i class="fa fa-fw fa-github-alt"></i></span></span><span class=links-of-author-item><span class=exturl data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9LaW5nX19NdWk=" title="Twitter &rarr; https://twitter.com/King__Mui"><i class="fa fa-fw fa-twitter"></i></span></span><span class=links-of-author-item><span class=exturl data-url=aHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2tpbmdtdWkubWVp title="FB Page &rarr; https://www.facebook.com/kingmui.mei"><i class="fa fa-fw fa-facebook-official"></i></span></span><span class=links-of-author-item><span class=exturl data-url="aHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS9raW5nX19tdWk=" title="Instagram &rarr; https://www.instagram.com/king__mui"><i class="fa fa-fw fa-instagram"></i></span></span></div><div class="cc-license motion-element" itemprop=license><span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLW5kLzQuMC8="><img src=/images/cc-by-nc-nd.svg alt="Creative Commons"></span></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class=post-toc><div class=post-toc-content><ol class=nav><li class="nav-item nav-level-3"><a class=nav-link href=#SEO-优化><span class=nav-number>1.</span> <span class=nav-text>SEO 优化</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#给你的-hexo-站点添加-sitemap-网站地图><span class=nav-number>1.1.</span> <span class=nav-text>给你的 hexo 站点添加 sitemap 网站地图</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#给非友情链接的出站链接添加-“nofollow”-标签><span class=nav-number>1.2.</span> <span class=nav-text>给非友情链接的出站链接添加 “nofollow” 标签</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#域名解析><span class=nav-number>2.</span> <span class=nav-text>域名解析</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#RSS-订阅><span class=nav-number>3.</span> <span class=nav-text>RSS 订阅</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#个人简历页面><span class=nav-number>4.</span> <span class=nav-text>个人简历页面</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#修改文章内链接的样式><span class=nav-number>5.</span> <span class=nav-text>修改文章内链接的样式</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#修改文章后面标签的图标><span class=nav-number>6.</span> <span class=nav-text>修改文章后面标签的图标</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#文末感谢大家的阅读><span class=nav-number>7.</span> <span class=nav-text>文末感谢大家的阅读!</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#文章底部添加版权信息><span class=nav-number>8.</span> <span class=nav-text>文章底部添加版权信息</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#Algolia-搜索服务><span class=nav-number>9.</span> <span class=nav-text>Algolia 搜索服务</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#DaoVoice-实现在线联系><span class=nav-number>10.</span> <span class=nav-text>DaoVoice 实现在线联系</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#添加腾讯空间-404-公益页面><span class=nav-number>11.</span> <span class=nav-text>添加腾讯空间 404 公益页面</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#利用-Gulp-压缩代码><span class=nav-number>12.</span> <span class=nav-text>利用 Gulp 压缩代码</span></a></li></ol></div></div></section></div></aside></div></main><footer id=footer class=footer><div class=footer-inner><div class=copyright><span class=exturl data-url=aHR0cDovL3d3dy5taWl0YmVpYW4uZ292LmNu>浙ICP备18010341号</span> &copy; <span itemprop=copyrightYear>2019</span><span class=with-love id=animate><i class="fa fa-heart"></i></span> <span class=author itemprop=copyrightHolder>KINGMUI</span></div><div class=busuanzi-count><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span class=site-uv title=总访客量><i class="fa fa-user"></i><span class=busuanzi-value id=busuanzi_value_site_uv></span></span><span class=site-pv title=总访问量><i class="fa fa-eye"></i><span class=busuanzi-value id=busuanzi_value_site_pv></span></span></div></div></footer><div class=back-to-top><i class="fa fa-arrow-up"></i> <span id=scrollpercent><span>0</span>%</span></div><div><div class=addthis_inline_share_toolbox><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5ab5cdede089665e" async=async></script></div></div></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="/lib/jquery/index.js?v=2.1.3"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script id=ribbon size=300 alpha=0.6 zindex=-1 src=/lib/canvas-ribbon/canvas-ribbon.js></script><script src=/lib/reading_progress/reading_progress.js></script><script src="/js/src/utils.js?v=6.5.0"></script><script src="/js/src/motion.js?v=6.5.0"></script><script src="/js/src/affix.js?v=6.5.0"></script><script src="/js/src/schemes/pisces.js?v=6.5.0"></script><script src="/js/src/scrollspy.js?v=6.5.0"></script><script src="/js/src/post-details.js?v=6.5.0"></script><script src="/js/src/bootstrap.js?v=6.5.0"></script><script>window.livereOptions={refer:"2016/11/24/Hexo个性化配置/"},function(e,t){var n,r=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&((n=e.createElement(t)).src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,r.parentNode.insertBefore(n,r))}(document,"script")</script><link rel=stylesheet href=/lib/algolia-instant-search/instantsearch.min.css><script src=/lib/algolia-instant-search/instantsearch.min.js></script><script src="/js/src/algolia-search.js?v=6.5.0"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/src/exturl.js?v=6.5.0"></script><style>.copy-btn{display:inline-block;padding:6px 12px;font-size:13px;font-weight:700;line-height:20px;color:#333;white-space:nowrap;vertical-align:middle;cursor:pointer;background-color:#eee;background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;user-select:none;outline:0}.highlight-wrap .copy-btn{transition:opacity .3s ease-in-out;opacity:0;padding:2px 6px;position:absolute;right:4px;top:8px}.highlight-wrap .copy-btn:focus,.highlight-wrap:hover .copy-btn{opacity:1}.highlight-wrap{position:relative}</style><script>$(".highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("复制").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),n=document.createElement("textarea");document.body.appendChild(n),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.value=e,n.select(),n.focus();var o=document.execCommand("copy");document.body.removeChild(n),o?$(this).text("复制成功"):$(this).text("复制失败"),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("复制")},300)}).append(e)})</script></body></html>