<!doctype html><html lang=zh-CN><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content=#222><meta name=generator content="Hexo 5.4.0"><link rel=apple-touch-icon sizes=180x180 href=https://cdn.kingmui.cn/avatar.jpg><link rel=icon type=image/png sizes=32x32 href=https://cdn.kingmui.cn/avatar.jpg><link rel=icon type=image/png sizes=16x16 href=https://cdn.kingmui.cn/avatar.jpg><link rel=mask-icon href=https://cdn.kingmui.cn/avatar.jpg color=#222><meta name=google-site-verification content=sNI58_0qBlj048P3M9VIK0edTYQ9zf2quRwRS7aNr2w><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin=anonymous><script class=next-config data-name=main type=application/json>{"hostname":"www.kingmui.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.12.2","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src=/js/config.js></script><meta name=description content="Deno 是使用 V8 引擎并用 Rust 语言编写的 JavaScript 和 TypeScript 的简单，现代且安全的运行时。它汇集了许多最佳的开源技术，并在一个小的可执行文件中提供了全面的解决方案。它还解决了 Ryan 在我对Node.js感到遗憾的十件事演讲中谈到的设计缺陷。   前言不知道大家还记不记得两年前在 Github 发生的「学不动」事件。那次事件的起因便是著名的 Node"><meta property=og:type content=article><meta property=og:title content="Deno 1.0：你需要了解的"><meta property=og:url content=http://www.kingmui.cn/2020/05/24/deno-1-0-what-you-need-to-know/index.html><meta property=og:site_name content="King Mui"><meta property=og:description content="Deno 是使用 V8 引擎并用 Rust 语言编写的 JavaScript 和 TypeScript 的简单，现代且安全的运行时。它汇集了许多最佳的开源技术，并在一个小的可执行文件中提供了全面的解决方案。它还解决了 Ryan 在我对Node.js感到遗憾的十件事演讲中谈到的设计缺陷。   前言不知道大家还记不记得两年前在 Github 发生的「学不动」事件。那次事件的起因便是著名的 Node"><meta property=og:locale content=zh_CN><meta property=og:image content=https://cdn.kingmui.cn/deno1-0.jpg><meta property=og:image content=http://cdn.kingmui.cn/ts-extension-problem.png><meta property=og:image content=http://cdn.kingmui.cn/deno-tool-scream.png><meta property=og:image content=http://cdn.kingmui.cn/deno-inspect-with-chrome.png><meta property=article:published_time content=2020-05-24T06:03:24.000Z><meta property=article:modified_time content=2022-04-15T03:43:21.843Z><meta property=article:author content="King Mui"><meta property=article:tag content=JavaScript><meta property=article:tag content=deno><meta property=article:tag content=TypeScript><meta name=twitter:card content=summary><meta name=twitter:image content=https://cdn.kingmui.cn/deno1-0.jpg><link rel=canonical href=http://www.kingmui.cn/2020/05/24/deno-1-0-what-you-need-to-know/ ><script class=next-config data-name=page type=application/json>{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://www.kingmui.cn/2020/05/24/deno-1-0-what-you-need-to-know/","path":"2020/05/24/deno-1-0-what-you-need-to-know/","title":"Deno 1.0：你需要了解的"}</script><script class=next-config data-name=calendar type=application/json>""</script><title>Deno 1.0：你需要了解的 | King Mui</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-116303188-1"></script><script class=next-config data-name=google_analytics type=application/json>{"tracking_id":"UA-116303188-1","only_pageview":false}</script><script src=/js/third-party/analytics/google-analytics.js></script><script src=/js/third-party/analytics/baidu-analytics.js></script><script async src=https://hm.baidu.com/hm.js?65b6c252e87243b9ea8427abb6b8cf3e></script><noscript><link rel=stylesheet href=/css/noscript.css></noscript><link rel=alternate href=/atom.xml title="King Mui" type=application/atom+xml></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label=切换导航栏 role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><p class=site-title>King Mui</p><i class=logo-line></i></a><p class=site-subtitle itemprop=description>用艺术的眼光发现技术的美</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ rel=section><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href=/tags/ rel=section><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href=/archives/ rel=section><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-rss"><a href=/atom.xml rel=section><i class="fa fa-rss fa-fw"></i>RSS</a></li><li class="menu-item menu-item-search"><a role=button class=popup-trigger><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class=nav><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%89%8D%E8%A8%80><span class=nav-number>1.</span> <span class=nav-text>前言</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%B8%8E-Node-js-%E7%9A%84%E5%8C%BA%E5%88%AB><span class=nav-number>2.</span> <span class=nav-text>与 Node.js 的区别</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%B5%B7%E6%AD%A5><span class=nav-number>3.</span> <span class=nav-text>起步</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AE%89%E5%85%A8><span class=nav-number>4.</span> <span class=nav-text>安全</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%85%81%E8%AE%B8%E6%89%80%E6%9C%89%E6%9D%83%E9%99%90><span class=nav-number>4.1.</span> <span class=nav-text>允许所有权限</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%88%B6%E4%BD%9Cbash%E8%84%9A%E6%9C%AC><span class=nav-number>4.2.</span> <span class=nav-text>制作bash脚本</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E4%BD%BF%E7%94%A8%E4%BB%BB%E5%8A%A1%E8%BF%90%E8%A1%8C%E5%99%A8><span class=nav-number>4.3.</span> <span class=nav-text>使用任务运行器</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%AE%89%E8%A3%85%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%9A%84-Deno-%E7%A8%8B%E5%BA%8F><span class=nav-number>4.4.</span> <span class=nav-text>安装可执行的 Deno 程序</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%A0%87%E5%87%86%E5%BA%93><span class=nav-number>5.</span> <span class=nav-text>标准库</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#Deno-%E5%86%85%E7%BD%AE-tsc-%E5%BC%95%E6%93%8E><span class=nav-number>6.</span> <span class=nav-text>Deno 内置 tsc 引擎</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#Deno-%E5%B0%BD%E5%8F%AF%E8%83%BD%E4%BD%BF%E7%94%A8-Web-%E6%A0%87%E5%87%86><span class=nav-number>7.</span> <span class=nav-text>Deno 尽可能使用 Web 标准</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#ECMAScript-%E6%A8%A1%E5%9D%97%E6%A0%87%E5%87%86><span class=nav-number>8.</span> <span class=nav-text>ECMAScript 模块标准</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C><span class=nav-number>9.</span> <span class=nav-text>异步操作</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%8C%85%E7%AE%A1%E7%90%86><span class=nav-number>10.</span> <span class=nav-text>包管理</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%9F%A5%E6%89%BE%E5%85%BC%E5%AE%B9%E7%9A%84%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93><span class=nav-number>11.</span> <span class=nav-text>查找兼容的第三方库</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AE%89%E8%A3%85%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97><span class=nav-number>12.</span> <span class=nav-text>安装第三方模块</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%91%8A%E5%88%AB-package-json><span class=nav-number>13.</span> <span class=nav-text>告别 package.json</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8-JSDoc-%E7%94%9F%E6%88%90%E6%96%87%E6%A1%A3><span class=nav-number>14.</span> <span class=nav-text>使用 JSDoc 生成文档</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%86%85%E7%BD%AE%E5%B7%A5%E5%85%B7%E9%93%BE><span class=nav-number>15.</span> <span class=nav-text>内置工具链</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%B5%8B%E8%AF%95><span class=nav-number>16.</span> <span class=nav-text>测试</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%A0%BC%E5%BC%8F%E5%8C%96><span class=nav-number>17.</span> <span class=nav-text>格式化</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%89%93%E5%8C%85%E7%BC%96%E8%AF%91><span class=nav-number>18.</span> <span class=nav-text>打包编译</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%B0%83%E8%AF%95><span class=nav-number>19.</span> <span class=nav-text>调试</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AE%89%E8%A3%85-VSCode-%E6%8F%92%E4%BB%B6><span class=nav-number>20.</span> <span class=nav-text>安装 VSCode 插件</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%80%BB%E7%BB%93><span class=nav-number>21.</span> <span class=nav-text>总结</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt="King Mui" src=https://cdn.kingmui.cn/avatar.jpg><p class=site-author-name itemprop=name>King Mui</p><div class=site-description itemprop=description>生命不息，学习不止</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/ ><span class=site-state-item-count>26</span> <span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/ ><span class=site-state-item-count>18</span> <span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-author site-overview-item animated"><span class=links-of-author-item><span class=exturl data-url="aHR0cHM6Ly9naXRodWIuY29tL2tpbmdtdWk=" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;kingmui"><i class="fab fa-github-alt fa-fw"></i></span></span><span class=links-of-author-item><span class=exturl data-url=bWFpbHRvOmtpbmdtdWkuZGV2QG91dGxvb2suY29t title="E-Mail → mailto:kingmui.dev@outlook.com"><i class="fa fa-envelope fa-fw"></i></span></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-link fa-fw"></i> 友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><span class=exturl data-url="aHR0cHM6Ly9vdmVycmVhY3RlZC5pby8=" title=https:&#x2F;&#x2F;overreacted.io&#x2F;>Dan Abramov</span></li><li class=links-of-blogroll-item><span class=exturl data-url="aHR0cHM6Ly9qYWtlYXJjaGliYWxkLmNvbS8=" title=https:&#x2F;&#x2F;jakearchibald.com&#x2F;>Jake Archibald</span></li><li class=links-of-blogroll-item><span class=exturl data-url=aHR0cHM6Ly93d3cucnVhbnlpZmVuZy5jb20v title=https:&#x2F;&#x2F;www.ruanyifeng.com&#x2F;>阮一峰</span></li><li class=links-of-blogroll-item><span class=exturl data-url="aHR0cHM6Ly9naXRodWIuY29tL21xeXFpbmdmZW5nL0Jsb2c=" title=https:&#x2F;&#x2F;github.com&#x2F;mqyqingfeng&#x2F;Blog>冴羽</span></li></ul></div></div></div><div class="back-to-top animated" role=button aria-label=返回顶部><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div class=sidebar-dimmer></div></header><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang=zh-CN><link itemprop=mainEntityOfPage href=http://www.kingmui.cn/2020/05/24/deno-1-0-what-you-need-to-know/ ><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content=https://cdn.kingmui.cn/avatar.jpg><meta itemprop=name content="King Mui"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="King Mui"><meta itemprop=description content=生命不息，学习不止></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Deno 1.0：你需要了解的 | King Mui"><meta itemprop=description content></span><header class=post-header><h1 class=post-title itemprop="name headline">Deno 1.0：你需要了解的</h1><div class=post-meta-container><div class=post-meta><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span> <span class=post-meta-item-text>发表于</span> <time title="创建时间：2020-05-24 14:03:24" itemprop="dateCreated datePublished" datetime=2020-05-24T14:03:24+08:00>2020-05-24</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i></span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2022-04-15 11:43:21" itemprop=dateModified datetime=2022-04-15T11:43:21+08:00>2022-04-15</time></span><span class=post-meta-item title=阅读次数 id=busuanzi_container_page_pv><span class=post-meta-item-icon><i class="far fa-eye"></i></span> <span class=post-meta-item-text>阅读次数：</span><span id=busuanzi_value_page_pv></span></span><span class=post-meta-break></span><span class=post-meta-item title=本文字数><span class=post-meta-item-icon><i class="far fa-file-word"></i></span> <span class=post-meta-item-text>本文字数：</span> <span>12k</span></span><span class=post-meta-item title=阅读时长><span class=post-meta-item-icon><i class="far fa-clock"></i></span> <span class=post-meta-item-text>阅读时长 &asymp;</span> <span>11 分钟</span></span></div></div></header><div class=post-body itemprop=articleBody><img data-src=https://cdn.kingmui.cn/deno1-0.jpg><div class="note info"><p>Deno 是使用 V8 引擎并用 Rust 语言编写的 JavaScript 和 TypeScript 的简单，现代且安全的运行时。它汇集了许多最佳的开源技术，并在一个小的可执行文件中提供了全面的解决方案。它还解决了 Ryan 在<span class=exturl data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1NM0JNOVRCLTh5QQ==">我对Node.js感到遗憾的十件事<i class="fa fa-external-link-alt"></i></span>演讲中谈到的设计缺陷。</p></div><h3 id=前言><a href=#前言 class=headerlink title=前言></a>前言</h3><p>不知道大家还记不记得两年前在 Github 发生的「学不动」事件。那次事件的起因便是著名的 Node 之父 <span class=exturl data-url=aHR0cHM6Ly9naXRodWIuY29tL3J5>Ryan Dahl<i class="fa fa-external-link-alt"></i></span> 宣布新开一个叫 Deno 的项目，于是就有国人以一种类似于贴吧灌水的形式在 Deno 的 <span class=exturl data-url=aHR0cHM6Ly9naXRodWIuY29tL3J5L2Rlbm8vaXNzdWVzLzI1>issiue<i class="fa fa-external-link-alt"></i></span> 区里用中文大量发“学不动啦”，“求别更新”等帖子，顿时引起一片<span class=exturl data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzI3OTM1NjIwNw==">争论<i class="fa fa-external-link-alt"></i></span>。如今两年时间过去了，ry 也带着他的 Deno 1.0 正式与我们会面。不论我们学的动还是学不动，技术就在那里，不以人的意志为转移。在这篇文章中，我们将会涵盖所有令人激动的 Deno 特性。</p><span id=more></span><h3 id=与-Node-js-的区别><a href=#与-Node-js-的区别 class=headerlink title="与 Node.js 的区别"></a>与 Node.js 的区别</h3><p>与用 C++ 编写的 Node.js 不同，Deno 用 Rust 语言编写。那么为什么不像 Node.js 一样用 C++ 而是选择用 Rust 呢？主要是因为 Rust 提供了很多现成的模块，对于 Deno 来说，可以节约很多开发时间。也许是看到了 Rust 提供了很多现成模块，Deno 也决定在自己的项目中添加许多现成模块。它的异步操作使用 Rust 的 <span class=exturl data-url="aHR0cHM6Ly90b2tpby5ycy8=">Tokio<i class="fa fa-external-link-alt"></i></span> 库来实现 Event Loop，并且像 Node.js 一样，使用 V8 引擎执行 JavaScript。</p><p>开箱即用地支持 TypeScript，可以直接运行 ts 代码，虽然最终还是要先编译成 js 代码来运行，但这都是内部完成的。这也就意味着你不需要每次编写完 ts 代码后还要去手动编译了，而且也省去了搭建 ts-node 之类的工作。它的内部会根据文件后缀名判断，如果是 <code>.ts</code> 后缀名，就先调用 TS 编译器，将其编译成 JavaScript；如果是 <code>.js</code> 后缀名，则直接传入 V8 引擎运行。</p><p>Deno 相对于 Node.js 一大亮点是没有 <code>node_modules</code>，没有 <code>package.json</code>，通过 <code>import URL</code> 的形式进行第三方模块的引用。</p><table><thead><tr><th></th><th>Node</th><th>Deno</th></tr></thead><tbody><tr><td>开发语言</td><td>C++</td><td>Rust</td></tr><tr><td>API 引用方式</td><td>模块导入</td><td>全局对象</td></tr><tr><td>模块系统</td><td>CommonJS &amp; 新版 node 实验性 ES Module</td><td>ES Module</td></tr><tr><td>安全</td><td>无安全限制</td><td>默认安全</td></tr><tr><td>TypeScript</td><td>第三方，如通过 ts-node 支持</td><td>原生支持</td></tr><tr><td>包管理</td><td>npm + node_modules</td><td>原生支持</td></tr><tr><td>异步操作</td><td>回调</td><td>Promise</td></tr><tr><td>包分发</td><td>中心化 npmjs.com</td><td>去中心化 import url</td></tr><tr><td>入口</td><td>package.json 配置</td><td>import url 直接引入</td></tr><tr><td>打包、测试、格式化</td><td>第三方如 eslint、gulp、webpack、babel 等</td><td>原生支持</td></tr></tbody></table><h3 id=起步><a href=#起步 class=headerlink title=起步></a>起步</h3><p>鉴于国内的网络原因，<span class=exturl data-url="aHR0cHM6Ly9naXRodWIuY29tL2p1c3RqYXZhYw==">justjavac<i class="fa fa-external-link-alt"></i></span> 大佬搞了<span class=exturl data-url="aHR0cHM6Ly9naXRodWIuY29tL2Rlbm9jbi9kZW5vX2luc3RhbGw=">国内镜像<i class="fa fa-external-link-alt"></i></span>加速。要更新到最新版本，请使用 <code>deno upgrade</code>。</p><p>Mac/Linux</p><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>curl -fsSL https://x.deno.js.cn/install.sh | sh</span><br></pre></td></tr></table></figure><p>Windows</p><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line>iwr https://x.deno.js.cn/install.ps1 -useb -outf install.ps1; .\install.ps1</span><br><span class=line><span class=meta>#</span><span class=bash> iwr https://x.deno.js.cn/install.ps1 -useb | iex</span></span><br></pre></td></tr></table></figure><p>要获得有关任何 Deno 子命令的帮助，请使用以下任一命令。</p><ul><li><code>deno [subcommand] -h</code></li><li><code>deno [subcommand] --help</code></li></ul><h3 id=安全><a href=#安全 class=headerlink title=安全></a>安全</h3><p>Deno 具有安全控制，默认是安全的。除非明确启用，否则没有文件，网络或环境的访问权限。相比之下，Node.js 拥有对文件系统和网络的完全访问权限。</p><p>在没有权限的情况下运行程序：</p><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>deno run file-needing-to-run-a-subprocess.ts</span><br></pre></td></tr></table></figure><p>如果代码需要权限设置，执行后，会发现一串报错：</p><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>error: Uncaught PermissionDenied: access to run a subprocess, run again with the --allow-run flag</span><br></pre></td></tr></table></figure><p>Deno 使用命令行选项来显式指定程序允许访问的系统权限。最常用的包括：</p><ul><li>环境变量读取权限</li><li>网络访问权限</li><li>文件系统读/写访问权限</li><li>运行子进程权限</li></ul><p>要查看完整的权限列表，请输入 <code>deno run -h</code> 查看。</p><p>最佳做法是将权限白名单用于读，写和网络。这使你可以更详细地了解允许 Deno 使用的内容。例如，要允许 Deno 在 <code>/etc</code> 目录中有读取文件的权限，请使用：</p><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>deno --allow-read=/etc</span><br></pre></td></tr></table></figure><p><strong>使用权限的快捷方式</strong></p><p>你可能很快就厌倦了每次运行应用程序时都要显式启用权限的情况。要解决此问题，你可以采用以下任意一种方法。</p><h4 id=允许所有权限><a href=#允许所有权限 class=headerlink title=允许所有权限></a>允许所有权限</h4><p>你可以使用 <code>--allow-all</code> 或 <code>-A</code> 启用所有权限。不过<strong>不建议这样做</strong>，因为它移除了 Deno 为我们带来的安全性优势。</p><h4 id=制作bash脚本><a href=#制作bash脚本 class=headerlink title=制作bash脚本></a>制作bash脚本</h4><p>使用运行程序所需的最小权限创建一个 bash 脚本。</p><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=meta>#!/bin/bash</span></span><br><span class=line></span><br><span class=line>// 允许允许子进程和文件系统的写入权限</span><br><span class=line>deno run --allow-run --allow-write mod.ts</span><br></pre></td></tr></table></figure><h4 id=使用任务运行器><a href=#使用任务运行器 class=headerlink title=使用任务运行器></a>使用任务运行器</h4><p>你可以使用 GNU 工具 make 通过一组带有权限的 Deno 命令来创建一个文件。你还可以使用特定于 Deno 的版本 <span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQveC9kcmFrZS8=">Drake<i class="fa fa-external-link-alt"></i></span>。</p><h4 id=安装可执行的-Deno-程序><a href=#安装可执行的-Deno-程序 class=headerlink title="安装可执行的 Deno 程序"></a>安装可执行的 Deno 程序</h4><p>使用 <code>deno install</code> <span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQvbWFudWFsL3Rvb2xzL3NjcmlwdF9pbnN0YWxsZXIjc2NyaXB0LWluc3RhbGxlcg==">安装一个 Deno 程序<i class="fa fa-external-link-alt"></i></span>，该程序具有执行所需的所有权限。安装后，你可以从 <code>$PATH</code> 中的任何位置访问该程序。</p><h3 id=标准库><a href=#标准库 class=headerlink title=标准库></a>标准库</h3><p>Deno <span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQvc3RkLw==">标准库<i class="fa fa-external-link-alt"></i></span>是由 Deno 官方维护并保证可与 Deno 一起使用的常用模块集合。它涵盖了用户最常用于常见任务的代码，并且宽松地基于 Go 编程语言提供的标准库。</p><p>JavaScript 一直因缺乏标准库而备受困扰。用户被迫一次又一次地重新造轮子，开发人员必须经常在 NPM 上搜索第三方模块，以解决平台本应提供的常见问题。</p><p>对于像 React 之类的解决复杂问题的库作为第三方包而存在是一件好事，但是对于 <span class=exturl data-url="aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVW5pdmVyc2FsbHlfdW5pcXVlX2lkZW50aWZpZXI=">UUID<i class="fa fa-external-link-alt"></i></span> 生成等简单的事情，最好使用官方的标准库。这些小型库可作为大型库的构建模块，从而加快开发速度。有多少一度流行的库最终却被遗弃，用户最终只能选择要么自己维护，要么重新选择一个库？实际上，<span class=exturl data-url="aHR0cHM6Ly9ibG9nLnRpZGVsaWZ0LmNvbS91cC10by0yMC1wZXJjZW50LW9mLXlvdXItYXBwbGljYXRpb24tZGVwZW5kZW5jaWVzLW1heS1iZS11bm1haW50YWluZWQ=">没有积极维护<i class="fa fa-external-link-alt"></i></span>的常用依赖多达 20％ 之多。</p><p><strong>Deno 官方维护模块及其对应的 NPM 模块</strong></p><table><thead><tr><th>Deno 模块</th><th>描述</th><th>NPM 模块</th></tr></thead><tbody><tr><td><span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL2ZtdC9jb2xvcnMudHM=">colors<i class="fa fa-external-link-alt"></i></span></td><td>为终端添加颜色</td><td><strong>chalk, kleur, and colors</strong></td></tr><tr><td><span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL2RhdGV0aW1lL1JFQURNRS5tZA==">datetime<i class="fa fa-external-link-alt"></i></span></td><td>帮助使用 JavaScript Date 对象</td><td></td></tr><tr><td><span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL2VuY29kaW5nL1JFQURNRS5tZA==">encoding<i class="fa fa-external-link-alt"></i></span></td><td>增加了对外部数据结构（如base32，binary，csv，toml和yaml）的支持</td><td></td></tr><tr><td><span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL2ZsYWdzL1JFQURNRS5tZA==">flags<i class="fa fa-external-link-alt"></i></span></td><td>帮助使用命令行参数</td><td><strong>minimist</strong></td></tr><tr><td><span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL2ZzL1JFQURNRS5tZA==">fs<i class="fa fa-external-link-alt"></i></span></td><td>帮助操纵文件系统</td><td></td></tr><tr><td><span class=exturl data-url=aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL2h0dHAvUkVBRE1FLm1k>http<i class="fa fa-external-link-alt"></i></span></td><td>允许通过 HTTP 提供本地服务</td><td><strong>http-server</strong></td></tr><tr><td><span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL2xvZy9SRUFETUUubWQ=">log<i class="fa fa-external-link-alt"></i></span></td><td>用于创建日志</td><td><strong>winston</strong></td></tr><tr><td><span class=exturl data-url=aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL3Rlc3RpbmcvUkVBRE1FLm1k>testing<i class="fa fa-external-link-alt"></i></span></td><td>用于单元测试</td><td><strong>chai</strong></td></tr><tr><td><span class=exturl data-url=aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL3V1aWQvUkVBRE1FLm1k>uuid<i class="fa fa-external-link-alt"></i></span></td><td>生成 UUID</td><td><strong>uuid</strong></td></tr><tr><td><span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL3dzL1JFQURNRS5tZA==">ws<i class="fa fa-external-link-alt"></i></span></td><td>帮助创建 WebSocket 客户端/服务端</td><td><strong>ws</strong></td></tr></tbody></table><h3 id=Deno-内置-tsc-引擎><a href=#Deno-内置-tsc-引擎 class=headerlink title="Deno 内置 tsc 引擎"></a>Deno 内置 tsc 引擎</h3><p>TypeScript 是 JavaScript 的超集，添加了显式类型。任何有效的 JavaScript 也是有效的 TypeScript，因此将你的代码转换为 TypeScript 是轻而易举的。只需将扩展名更改为 <code>.ts</code> 并开始添加类型即可。</p><p>要在 Deno 中使用 TypeScript，无需执行任何操作。如果没有 Deno，则必须将 TypeScript 编译为 JavaScript 才能运行。Deno 在内部为你完成了此操作，从而使 TypeScript 更加易于采用。</p><p><strong>使用自定义的 <code>tsconfig.json</code></strong></p><p>对于熟悉 TypeScript 的人来说，你将习惯使用 <code>tsconfig.json</code> 文件来提供编译器选项。使用 Deno 时这是可选的，因为它已经具有自己的默认配置。如果你使用自己的 <code>tsconfig.json</code> 且与 Deno 冲突，则会收到警报。</p><p>此特性需要 <code>-c</code> 选项和 <code>tsconfig.json</code>。</p><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>deno run -c tsconfig.json [file-to-run.ts]</span><br></pre></td></tr></table></figure><p>Deno 默认使用严格模式。除非有一些不道德的人将其改写，否则 Deno 将合理地尽可能多的在用户编写一些过于草率的代码时给出警告。</p><h3 id=Deno-尽可能使用-Web-标准><a href=#Deno-尽可能使用-Web-标准 class=headerlink title="Deno 尽可能使用 Web 标准"></a>Deno 尽可能使用 Web 标准</h3><p>建立 Web 标准需要很长的时间，一旦设定为固定标准，就不会改变它。虽然框架来来去去，但标准终将保留。花费在学习标准化 API 上的时间永远不会浪费，因为没有人敢于破坏标准。它可能已经使用了数十年，甚至可能是你职业生涯的其余部分。新技术来了又走了，但是有很多思想是共通的。你要设置正确的优先级，把 80% 的时间投资到基础知识学习上，把剩下的 20% 留给框架，类库和工具。</p><p><code>fetch</code> web API 提供了用于获取资源的接口。浏览器中有一个 JavaScript <code>fetch()</code> 方法。如果你想在 Node.js 中使用此标准，则需要依赖第三方库 <span class=exturl data-url="aHR0cHM6Ly9naXRodWIuY29tL25vZGUtZmV0Y2gvbm9kZS1mZXRjaA==">Node Fetch<i class="fa fa-external-link-alt"></i></span> 实现。但在 Deno 中，它是内置的，并且就像浏览器一样工作，开箱即用。</p><p>Deno 1.0 提供以下与 Web 兼容的 API。</p><ul><li>addEventListener</li><li>btoa</li><li>atob</li><li>clearInterval</li><li>clearTimeout</li><li>dispatchEvent</li><li>fetch</li><li>queueMicrotask</li><li>removeEventListener</li><li>setInterval</li><li>setTimeout</li><li>AbortSignal</li><li>Blob</li><li>File</li><li>FormData</li><li>Headers</li><li>ReadableStream</li><li>Request</li><li>Response</li><li>URL</li><li>URLSearchParams</li><li>console</li><li>isConsoleInstance</li><li>location</li><li>onload</li><li>onunload</li><li>self</li><li>window</li><li>AbortController</li><li>CustomEvent</li><li>DOMException</li><li>ErrorEvent</li><li>Event</li><li>EventTarget</li><li>MessageEvent</li><li>TextDecoder</li><li>TextEncoder</li><li>Worker</li><li>ImportMeta</li><li>Location</li></ul><p>这些都可以在程序的顶级范围内使用。这意味着如果你避免在 <code>Deno()</code> 名称空间上使用任何方法，则你的代码应与 Deno 和浏览器兼容。尽管并非所有 Deno API 都 100％ 符合其等效的 Web 规范，但这对于前端开发人员而言仍然是不错的福音。</p><h3 id=ECMAScript-模块标准><a href=#ECMAScript-模块标准 class=headerlink title="ECMAScript 模块标准"></a>ECMAScript 模块标准</h3><p>Deno 与 Node.js 的一项重大变化是 Deno 使用了官方的 ECMAScript 模块标准，而不是传统的 CommonJS。Node.js 直到 2019 年底才启用版本 13.2.0 的 ECMAScript 模块，但即便如此，支持度还是不够，并且仍然包含有争议的 <code>.mjs</code> 文件扩展名。</p><p>Deno 使用 URL 或文件路径引用该模块，并包含必需的文件扩展名。例如：</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>import</span> * <span class=keyword>as</span> log <span class=keyword>from</span> <span class=string>&quot;https://deno.land/std/log/mod.ts&quot;</span>;</span><br><span class=line><span class=keyword>import</span> &#123; outputToConsole &#125; <span class=keyword>from</span> <span class=string>&quot;./view.ts&quot;</span>;</span><br></pre></td></tr></table></figure><p><strong>使用文件扩展名的问题</strong></p><p>Deno 期望模块具有文件扩展名，但 TypeScript 则相反。</p><img data-src=http://cdn.kingmui.cn/ts-extension-problem.png><p>在任何地方使用文件扩展名都应该是合法的，并且这似乎应该是达成共识的。但不幸的是，实际上事情要复杂得多。现在，我们可以使用 <span class=exturl data-url=aHR0cHM6Ly9naXRodWIuY29tL2Rlbm9sYW5kL3ZzY29kZV9kZW5v>Visual Studio Code Extension<i class="fa fa-external-link-alt"></i></span> 解决仅 Deno 项目的问题。</p><h3 id=异步操作><a href=#异步操作 class=headerlink title=异步操作></a>异步操作</h3><p>Node.js 用回调的方式处理异步操作，Deno 则选择用 Promise。</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line><span class=comment>// node 方式</span></span><br><span class=line><span class=keyword>const</span> fs = <span class=built_in>require</span>(<span class=string>&quot;fs&quot;</span>);</span><br><span class=line>fs.readFile(<span class=string>&quot;./data.txt&quot;</span>, <span class=function>(<span class=params>err, data</span>) =&gt;</span> &#123;</span><br><span class=line>  <span class=keyword>if</span> (err) <span class=keyword>throw</span> err;</span><br><span class=line>  <span class=built_in>console</span>.log(data);</span><br><span class=line>&#125;);</span><br></pre></td></tr></table></figure><p>Deno 支持 <code>top-level-await</code>，所以以上读取文件的代码可以为：</p><figure class="highlight typescript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line><span class=comment>// deno 方式</span></span><br><span class=line><span class=keyword>const</span> data = <span class=keyword>await</span> Deno.readFile(<span class=string>&quot;./data.txt&quot;</span>);</span><br><span class=line><span class=built_in>console</span>.log(data);</span><br></pre></td></tr></table></figure><p>Node.js 如果想要实现 Promise 化，则需要借助第三方模块 promisify，通过包裹一层函数来实现。例如：</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre></td><td class=code><pre><span class=line><span class=comment>// node API promisify</span></span><br><span class=line><span class=keyword>const</span> &#123; promisify &#125; = <span class=built_in>require</span>(<span class=string>&quot;es6-promisify&quot;</span>);</span><br><span class=line><span class=keyword>const</span> fs = <span class=built_in>require</span>(<span class=string>&quot;fs&quot;</span>);</span><br><span class=line></span><br><span class=line><span class=comment>// 没有 top-level-await，只能包一层</span></span><br><span class=line><span class=keyword>async</span> <span class=function><span class=keyword>function</span> <span class=title>main</span>(<span class=params></span>) </span>&#123;</span><br><span class=line>  <span class=keyword>const</span> readFile = promisify(fs.readFile);</span><br><span class=line>  <span class=keyword>const</span> data = <span class=keyword>await</span> readFile(<span class=string>&quot;./data.txt&quot;</span>);</span><br><span class=line>  <span class=built_in>console</span>.log(data);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>main();</span><br></pre></td></tr></table></figure><h3 id=包管理><a href=#包管理 class=headerlink title=包管理></a>包管理</h3><p>人们对 Deno 中的包管理方式进行了彻底的重新思考。它是分散的，而不是依赖中心化仓库。任何人都可以托管一个程序包，就像任何人都可以托管网络上任何类型的文件一样。</p><p>使用像 npm 这样的中心化存储库有优缺点，而 Deno 的这一方面肯定是最具争议的。</p><p><strong>Deno 的包管理工作原理</strong></p><p>如此简化，可能会令你震惊。</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>import</span> &#123; assertEquals &#125; <span class=keyword>from</span> <span class=string>&quot;https://deno.land/std/testing/asserts.ts&quot;</span>;</span><br></pre></td></tr></table></figure><p>让我们与 Node.js 对比下变更：</p><ul><li>没有了 NPM 这种中心化的包管理器。我们可以直接从网络导入 ECMAScript 模块</li><li>不再有“神奇的” Node.js 模块解析。现在，语法是明确的，这使事情更容易理解</li><li>不再有 <code>node_modules</code> 目录。而是将依赖项下载并隐藏在你的硬盘驱动器中。如果需要刷新缓存并再次下载，只需在命令中添加 <code>--reload</code></li></ul><p>Deno 没有 Node.js 中的 <code>node_modules</code> 目录做为包存放的地方，但也需要一个地方存在安装的模块。如果要与项目代码一起下载依赖项而不是使用全局缓存，请使用 <code>$DENO_DIR</code> 环境变量。<code>DENO_DIR</code> 默认为 <code>$HOME/.deno</code>，就是 Deno 存放生成的代码和缓存的源码的路径。</p><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line><span class=comment># mac / linux</span></span><br><span class=line><span class=built_in>echo</span> <span class=string>&#x27;export DENO_DIR=$HOME/.deno&#x27;</span> &gt;&gt; ~/.bash_profile</span><br><span class=line><span class=built_in>source</span> ~/.bash_profile <span class=comment># 如果是 zsh 则：source ~/.zshrc</span></span><br></pre></td></tr></table></figure><h3 id=查找兼容的第三方库><a href=#查找兼容的第三方库 class=headerlink title=查找兼容的第三方库></a>查找兼容的第三方库</h3><p>有一个与 Deno 兼容的第三方模块的<span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQveC8=">用户区<i class="fa fa-external-link-alt"></i></span>。尽管没有官方支持与 Node.js 的向后兼容性，但是仍然有许多库和应用程序可以与 Deno 一起正常工作。有些是开箱即用，而另一些则需要一些努力才能正常工作。</p><table><thead><tr><th>库类型</th><th>兼容性</th></tr></thead><tbody><tr><td>在浏览器中运行 使用ESM语法</td><td>确认与 <span class=exturl data-url=aHR0cHM6Ly93d3cucGlrYS5kZXYvc2VhcmNo>Pika 软件包目录<i class="fa fa-external-link-alt"></i></span>兼容，并使用 NPM 或 <span class=exturl data-url=aHR0cHM6Ly93d3cucGlrYS5kZXYvY2Ru>Pika CDN<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>在浏览器中运行，使用CommonJS语法</td><td>使用 <span class=exturl data-url="aHR0cHM6Ly9qc3BtLmlvLw==">jspm.io<i class="fa fa-external-link-alt"></i></span> 将模块包装为 ESM 语法或 <span class=exturl data-url=aHR0cHM6Ly93d3cucGlrYS5kZXYvY2Ru>Pika CDN<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>不在浏览器中运行，不使用Node.js API</td><td>使用 <span class=exturl data-url="aHR0cHM6Ly9qc3BtLmlvLw==">jspm.io<i class="fa fa-external-link-alt"></i></span> 将模块包装为 ESM 语法或 <span class=exturl data-url=aHR0cHM6Ly93d3cucGlrYS5kZXYvY2Ru>Pika CDN<i class="fa fa-external-link-alt"></i></span></td></tr><tr><td>使用 Node.js API</td><td>这可能行不通，但请尝试使用 <span class=exturl data-url=aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL25vZGUv>NodeJS 标准库的官方兼容层<i class="fa fa-external-link-alt"></i></span></td></tr></tbody></table><h3 id=安装第三方模块><a href=#安装第三方模块 class=headerlink title=安装第三方模块></a>安装第三方模块</h3><p>Deno 仍然很新，周围的生态系统仍在形成。建议将 <span class=exturl data-url=aHR0cHM6Ly93d3cucGlrYS5kZXYvY2Ru>Pika<i class="fa fa-external-link-alt"></i></span> 作为在标准库和用户库以外寻找兼容模块的第一站。NPM 上可用的任何软件包也应位于 Pika CDN 上，并已自动转换为可与 <code>import</code> 一起使用。</p><p>Pika 背后的开发人员已与 Deno 合作，通过被称为 <span class=exturl data-url="aHR0cHM6Ly9kZXYudG8vcGlrYS9pbnRyb2R1Y2luZy1waWthLWNkbi1kZW5vLXA4Yg==">X-TypeScript-Types<i class="fa fa-external-link-alt"></i></span> 的 ECMAScript 模块提供 TypeScript 类型。你可以通过简单地使用其 CDN 平台来利用此优势。</p><h3 id=告别-package-json><a href=#告别-package-json class=headerlink title="告别 package.json"></a>告别 <code>package.json</code></h3><p>NPM 生态下包信息存放在 <code>package.json</code>，包含但不限于下面的内容：</p><ul><li>项目元信息</li><li>项目依赖和版本号</li><li>依赖还进行分类，比如 <code>dependencies</code>、<code>devDependencies</code> 甚至 <code>peerDependencies</code></li><li>标记入口，<code>main</code> 和 <code>module</code>，还有 TS 用的 <code>types</code> 与 <code>typings</code>，脚手架的 <code>bin</code> 等等</li><li>npm scripts</li></ul><figure class="highlight json"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre></td><td class=code><pre><span class=line>&#123;</span><br><span class=line>  <span class=attr>&quot;name&quot;</span>: <span class=string>&quot;Project Name&quot;</span>, <span class=comment>// metadata</span></span><br><span class=line>  <span class=attr>&quot;version&quot;</span>: <span class=string>&quot;1.0.0&quot;</span>, <span class=comment>// metadata</span></span><br><span class=line>  <span class=attr>&quot;description&quot;</span>: <span class=string>&quot;My application&quot;</span>, <span class=comment>// metadata</span></span><br><span class=line>  <span class=attr>&quot;type&quot;</span>: <span class=string>&quot;module&quot;</span>, <span class=comment>// module functionality</span></span><br><span class=line>  <span class=attr>&quot;main&quot;</span>: <span class=string>&quot;src/mod.ts&quot;</span>, <span class=comment>// module functionality</span></span><br><span class=line>  <span class=attr>&quot;scripts&quot;</span>: &#123;</span><br><span class=line>    <span class=attr>&quot;build&quot;</span>: <span class=string>&quot;npm run _copy-build-files &amp;&amp; rollup -c&quot;</span>,</span><br><span class=line>    <span class=attr>&quot;build-watch&quot;</span>: <span class=string>&quot;npm run _copy-build-files &amp;&amp; rollup -cw&quot;</span></span><br><span class=line>  &#125;, <span class=comment>// scripting functionality</span></span><br><span class=line>  <span class=attr>&quot;license&quot;</span>: <span class=string>&quot;gpl-3.0&quot;</span>, <span class=comment>// metadata</span></span><br><span class=line>  <span class=attr>&quot;devDependencies&quot;</span>: &#123;</span><br><span class=line>    <span class=attr>&quot;@rollup/plugin-TypeScript&quot;</span>: <span class=string>&quot;^3.1.1&quot;</span>,</span><br><span class=line>    <span class=attr>&quot;rollup&quot;</span>: <span class=string>&quot;^1.32.1&quot;</span>,</span><br><span class=line>    <span class=attr>&quot;TypeScript&quot;</span>: <span class=string>&quot;^3.8.3&quot;</span></span><br><span class=line>  &#125;, <span class=comment>// versioning and categorizing functionality</span></span><br><span class=line>  <span class=attr>&quot;dependencies&quot;</span>: &#123;</span><br><span class=line>    <span class=attr>&quot;tplant&quot;</span>: <span class=string>&quot;^2.3.3&quot;</span></span><br><span class=line>  &#125; <span class=comment>// versioning and categorizing functionality</span></span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure><p>所有这些实践随着时间的流逝而融合在一起，现在代表着 JavaScript 生态系统的标准工作方式。很容易忘记这不是官方标准；这些功能成为必需品时，才想到它。现在，JavaScript 已经赶上了，是时候进行重新思考了。</p><p>Deno 仍无法取代 <code>package.json</code> 的所有功能，但目前有一些解决方案。</p><p><strong>使用 <code>deps.ts</code> 和 URL 进行版本控制</strong></p><p>软件包版本控制有一个 Deno 约定，即使用名为 <code>deps.ts</code> 的特殊文件。在内部，依赖项被重新导出。这允许应用程序中的不同模块都引用相同的源。而不是告诉 npm 要下载哪个模块版本，而是在 <code>deps.ts</code> 中的 URL 中引用该模块。</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=comment>// deps.ts</span></span><br><span class=line></span><br><span class=line><span class=keyword>export</span> &#123; assert &#125; <span class=keyword>from</span> <span class=string>&quot;https://deno.land/std@v0.39.0/testing/asserts.ts&quot;</span>;</span><br><span class=line><span class=keyword>export</span> &#123; green, bold &#125; <span class=keyword>from</span> <span class=string>&quot;https://deno.land/std@v0.39.0/fmt/colors.ts&quot;</span>;</span><br></pre></td></tr></table></figure><p>如果要更新任何模块，可以在 <code>deps.ts</code> 中更改 URL。例如，将 <code>@v0.39.0</code> 替换为 <code>@v0.41.0</code>，新版本将在所有地方使用。如果改为直接将 <span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQvc3RkQHYwLjM5LjAvZm10L2NvbG9ycy50cw==">https://deno.land/std@v0.39.0/fmt/colors.ts<i class="fa fa-external-link-alt"></i></span> 导入每个模块，则你将不费吹灰之力遍历整个应用程序并更改每个引用。</p><p>假设你之前下载的模块以后不会被篡改可能会带来安全风险。这就是为什么还可以选择创建<span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL21hbnVhbC5tZCNsb2NrLWZpbGU=">锁定<i class="fa fa-external-link-alt"></i></span>文件的原因。这将确保新下载的模块与你最初下载的模块相同。</p><h3 id=使用-JSDoc-生成文档><a href=#使用-JSDoc-生成文档 class=headerlink title="使用 JSDoc 生成文档"></a>使用 JSDoc 生成文档</h3><p>JSDoc 于 1999 年发布。现在，它是 JavaScript 和 TypeScript 最常用的文档生成器。虽然不是正式的 Web 标准，但它是 <code>package.json</code> 中所有元数据的完美替代。</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/**</span></span><br><span class=line><span class=comment> * <span class=doctag>@file </span>Manages the configuration settings for the widget</span></span><br><span class=line><span class=comment> * <span class=doctag>@author </span>Lucio Fulci</span></span><br><span class=line><span class=comment> * <span class=doctag>@copyright </span>2020 Intervision</span></span><br><span class=line><span class=comment> * <span class=doctag>@license <span class=variable>gpl</span></span>-3.0</span></span><br><span class=line><span class=comment> * <span class=doctag>@version </span>1.0</span></span><br><span class=line><span class=comment> *</span></span><br></pre></td></tr></table></figure><p>Deno 开箱即用地支持 JSDoc 并将其用于其内置的文档系统。虽然 <code>deno doc</code> 命令当前不使用上面的元数据，但它会读取函数的描述及其参数的描述。</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line><span class=comment>/**</span></span><br><span class=line><span class=comment> * Returns a value of (true?) if the rule is to be included</span></span><br><span class=line><span class=comment> *</span></span><br><span class=line><span class=comment> * <span class=doctag>@param </span>key Current key name of rule being checked</span></span><br><span class=line><span class=comment> * <span class=doctag>@param </span>val Current value of rule being checked</span></span><br><span class=line><span class=comment> **/</span></span><br></pre></td></tr></table></figure><p>你可以使用 <code>deno doc &lt;filename&gt;</code> 来查看程序的文档。</p><figure class="highlight shell"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line>deno doc mod.ts</span><br><span class=line></span><br><span class=line>function rulesToRemove(key: string, val: any[]): boolean</span><br><span class=line>  Returns a value of if the rule is to be included</span><br></pre></td></tr></table></figure><p>在线托管程序时，请使用<span class=exturl data-url="aHR0cHM6Ly9kb2MuZGVuby5sYW5kLw==">在线文档查看器<i class="fa fa-external-link-alt"></i></span>更详细地查看它。</p><h3 id=内置工具链><a href=#内置工具链 class=headerlink title=内置工具链></a>内置工具链</h3><img data-src=http://cdn.kingmui.cn/deno-tool-scream.png><p>这是对前端开发人员影响最大的领域。当前的 JavaScript 工具状态非常混乱。当你添加 TypeScript 工具时，复杂性甚至更进一步增加。</p><p>JavaScript 的好处之一是它不需要编译，因此可以立即运行在浏览器中。这使得入门门槛很低，你只需要一个记事本和一个浏览器就可以开始写代码。</p><p>不幸的是，这种简单性和可访问性已被过度的工具链所破坏。显然将 JavaScript 开发变成了一场噩梦。</p><p>工具的混乱已经发展到这样的程度：许多开发人员迫切希望回到实际编写代码的过程中，而不是去研究配置文件并为应该采用的多个竞争标准而苦恼。解决这一问题的一个新兴项目是 Facebook 的 <span class=exturl data-url=aHR0cHM6Ly9naXRodWIuY29tL3JvbWVqcy9yb21l>rome<i class="fa fa-external-link-alt"></i></span>。这还处于起步阶段。尽管它可能被证明是有益的，但 Deno 有潜力成为更实质性的解决方案。</p><p>Deno 本身就是一个完整的生态系统，具有运行时和其自己的模块/包管理系统。这为内置所有其自己的工具提供了更大的空间。让我们研究一下 1.0 中可用的工具，以及如何使用它来减少对第三方库的依赖并简化开发。</p><p>目前尚无法在 Deno 中替换整个前端构建管道，但是我们相信这不会等太久的。</p><h3 id=测试><a href=#测试 class=headerlink title=测试></a>测试</h3><p>测试运行器使用 <code>Deno.test()</code> 函数内置在 Deno 的核心中。<span class=exturl data-url=aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL3Rlc3Rpbmcv>断言库<i class="fa fa-external-link-alt"></i></span>也在标准库中提供。所有你想要的，例如 <code>assertEquals()</code> 和 <code>assertStrictEq()</code>，以及一些不太常见的断言，例如 <code>assertThrowsAsync()</code> 都包含在其中。</p><p>目前，尚无测试覆盖功能。并且需要使用第三方工具，如 <span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQveC9kZW5vbi8=">Denon<i class="fa fa-external-link-alt"></i></span> 来设置观察模式。</p><p>要查看所有测试运行程序选项，请使用 <code>deno test --help</code>。尽管它们非常有限，但是你可能会从 Mocha 之类的程序中了解许多功能。例如，<code>--failfast</code> 将在遇到第一个错误时停止，<code>--filter</code> 可用于过滤要运行的测试。</p><p><strong>使用测试运行器</strong></p><p>最基本的语法是 <code>deno test</code>。这将运行工作目录中以 <code>_test</code> 或 <code>.test</code> 结尾的所有文件，扩展名为 <code>.js</code>，<code>.ts</code>，<code>.jsx</code> 或 <code>.tsx</code>（例如：<code>example_test.ts</code>）</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>import</span> &#123; assertEquals &#125; <span class=keyword>from</span> <span class=string>&quot;https://deno.land/std/testing/asserts.ts&quot;</span>;</span><br><span class=line></span><br><span class=line>Deno.test(&#123;</span><br><span class=line>  <span class=attr>name</span>: <span class=string>&quot;testing example&quot;</span>,</span><br><span class=line>  fn(): <span class=keyword>void</span> &#123;</span><br><span class=line>    assertEquals(<span class=string>&quot;world&quot;</span>, <span class=string>&quot;world&quot;</span>);</span><br><span class=line>    assertEquals(&#123; <span class=attr>hello</span>: <span class=string>&quot;world&quot;</span> &#125;, &#123; <span class=attr>hello</span>: <span class=string>&quot;world&quot;</span> &#125;);</span><br><span class=line>  &#125;,</span><br><span class=line>&#125;);</span><br></pre></td></tr></table></figure><p>如果你的代码使用 DOM，则需要使用 <code>lib: [&quot;dom&quot;, &quot;esnext&quot;]</code> 提供自己的 <code>tsconfig.json</code>。我们将在下面详细介绍。</p><h3 id=格式化><a href=#格式化 class=headerlink title=格式化></a>格式化</h3><p>格式化功能由 <span class=exturl data-url="aHR0cHM6Ly9naXRodWIuY29tL2RwcmludC9kcHJpbnQ=">dprint<i class="fa fa-external-link-alt"></i></span> 提供，它是 Prettier 的快速替代品，它克隆了所有已建立的 Prettier 2.0 规则。</p><p>要格式化一个或多个文件，请使用 <code>deno fmt &lt;files&gt;</code> 或 <span class=exturl data-url="aHR0cHM6Ly9tYXJrZXRwbGFjZS52aXN1YWxzdHVkaW8uY29tL2l0ZW1zP2l0ZW1OYW1lPWF4ZXRyb3kudnNjb2RlLWRlbm8=">Visual Studio Code<i class="fa fa-external-link-alt"></i></span> 插件。</p><h3 id=打包编译><a href=#打包编译 class=headerlink title=打包编译></a>打包编译</h3><p>Deno 可以使用 <code>deno bundle</code> 从命令行创建一个简单的打包文件，但是它也公开了一个<span class=exturl data-url="aHR0cHM6Ly9kZW5vLmxhbmQvc3RkL21hbnVhbC5tZCNjb21waWxlci1hcGk=">内部编译器 API<i class="fa fa-external-link-alt"></i></span>，因此用户可以构建自己的输出。该 API 目前被标记为不稳定，因此你需要使用 <code>--unstable</code> 标识。</p><p>尽管 Deno 具有一些与 Web 兼容的 API，但它们并不完整。如果要编译任何引用 DOM 的前端 TypeScript，则需要在打包编译时告知 Deno 这些类型。你可以使用编译器 API 选项 <code>lib</code>。</p><figure class="highlight html"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre></td><td class=code><pre><span class=line><span class=comment>&lt;!-- index.html --&gt;</span></span><br><span class=line><span class=meta>&lt;!DOCTYPE <span class=meta-keyword>html</span>&gt;</span></span><br><span class=line><span class=tag>&lt;<span class=name>html</span> <span class=attr>lang</span>=<span class=string>&quot;en&quot;</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;<span class=name>head</span>&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>meta</span> <span class=attr>charset</span>=<span class=string>&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>meta</span> <span class=attr>name</span>=<span class=string>&quot;viewport&quot;</span> <span class=attr>content</span>=<span class=string>&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>title</span>&gt;</span>Document<span class=tag>&lt;/<span class=name>title</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;/<span class=name>head</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;<span class=name>body</span>&gt;</span></span><br><span class=line>    <span class=tag>&lt;<span class=name>h1</span> <span class=attr>id</span>=<span class=string>&quot;greeter&quot;</span>&gt;</span>Replace me<span class=tag>&lt;/<span class=name>h1</span>&gt;</span></span><br><span class=line>  <span class=tag>&lt;/<span class=name>body</span>&gt;</span></span><br><span class=line><span class=tag>&lt;/<span class=name>html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre></td><td class=code><pre><span class=line><span class=comment>// test-dom.ts</span></span><br><span class=line><span class=keyword>let</span> greeter: HTMLElement | <span class=literal>null</span> = <span class=built_in>document</span>.getElementById(<span class=string>&quot;greeter&quot;</span>)!; <span class=comment>// Please forgive the Non-Null Assertion Operator</span></span><br><span class=line></span><br><span class=line>greeter.innerText = <span class=string>&quot;Hello world!&quot;</span>;</span><br><span class=line>compile.ts</span><br><span class=line><span class=keyword>const</span> [errors, emitted] = <span class=keyword>await</span> Deno.compile(<span class=string>&quot;test-dom.ts&quot;</span>, <span class=literal>undefined</span>, &#123;</span><br><span class=line>  <span class=attr>lib</span>: [<span class=string>&quot;dom&quot;</span>, <span class=string>&quot;esnext&quot;</span>], <span class=comment>// include &quot;deno.ns&quot; for deno namespace</span></span><br><span class=line>  <span class=attr>outDir</span>: <span class=string>&quot;dist&quot;</span>,</span><br><span class=line>&#125;);</span><br><span class=line></span><br><span class=line><span class=keyword>if</span> (errors) &#123;</span><br><span class=line>  <span class=built_in>console</span>.log(<span class=string>&quot;There was an error:&quot;</span>);</span><br><span class=line>  <span class=built_in>console</span>.error(errors);</span><br><span class=line>&#125; <span class=keyword>else</span> &#123;</span><br><span class=line>  <span class=built_in>console</span>.log(emitted); <span class=comment>// normally we would write the file</span></span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure><p>下面是终端中的输出结果。</p><figure class="highlight bash"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line>&#123;</span><br><span class=line> dist/test-dom.js.map: <span class=string>&quot;&#123;&quot;</span>version<span class=string>&quot;:3,&quot;</span>file<span class=string>&quot;:&quot;</span>test-dom.js<span class=string>&quot;,&quot;</span>sourceRoot<span class=string>&quot;:&quot;</span><span class=string>&quot;,&quot;</span>sources<span class=string>&quot;:[&quot;</span>file:///home/david/Downloads/deno-arti...<span class=string>&quot;,</span></span><br><span class=line><span class=string> dist/test-dom.js: &quot;</span><span class=string>&quot;use strict&quot;</span>;nlet greeter = document.getElementById(<span class=string>&quot;greeter&quot;</span>);ngreeter.innerText = <span class=string>&quot;Hello world!&quot;</span>;n...<span class=string>&quot;</span></span><br><span class=line><span class=string>&#125;</span></span><br></pre></td></tr></table></figure><p>在上面的示例中，我们编译了引用 DOM 的 <code>test-dom.ts</code> 文件。在 <code>Deno.compile()</code> 中使用 <code>lib</code> 选项会覆盖 Deno 使用的所有 <code>lib</code> 默认选项，因此你需要重新添加 <code>esnext</code> 和 <code>deno.ns</code> 才能使用 Deno 命名空间。</p><p>这一切仍然是试验性的，我们希望 <code>bundle</code> 命令能够发展，以处理诸如 <code>tree shaking</code> 之类的事情，并更像 <code>Rollup.js</code>。</p><h3 id=调试><a href=#调试 class=headerlink title=调试></a>调试</h3><p>Deno 内置调试功能，但就目前而言，Visual Studio Code 扩展仍不支持它。要调试，请手动使用以下命令。</p><ul><li><code>deno run -A --inspect-brk fileToDebug.ts</code> 对模块使用最低权限</li><li>在 Chrome 或 Chromium 中打开 <code>chrome://inspect</code>。你会看到如下内容</li></ul><img data-src=http://cdn.kingmui.cn/deno-inspect-with-chrome.png><ul><li>单击 <code>inspect</code> 以连接并开始调试你的代码</li></ul><h3 id=安装-VSCode-插件><a href=#安装-VSCode-插件 class=headerlink title="安装 VSCode 插件"></a>安装 VSCode 插件</h3><p>由于 <code>import url</code> 的形式和 Deno 全局对象并未被 VSCode 支持，所以需要借助插件 <span class=exturl data-url="aHR0cHM6Ly9tYXJrZXRwbGFjZS52aXN1YWxzdHVkaW8uY29tL2l0ZW1zP2l0ZW1OYW1lPWF4ZXRyb3kudnNjb2RlLWRlbm8=">Deno<i class="fa fa-external-link-alt"></i></span> 进行支持。</p><div class="note warning"><p>注意：需要到 settings 中将 <code>deno.enabled</code> 设置为 <code>true</code></p></div><figure class="highlight json"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=comment>// .vscode/settings.json</span></span><br><span class=line>&#123;</span><br><span class=line>  <span class=attr>&quot;deno.enable&quot;</span>: <span class=literal>true</span>,</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure><h3 id=总结><a href=#总结 class=headerlink title=总结></a>总结</h3><p>事实证明，前端生态圈的新技术涌现是好事。从积极的一面来看，我们将有更多更高质量的库的选择权利。但消极的一面是，不断涌现的新框架和库也增加了前端的学习成本。</p><p>Deno 成功地解决了 JavaScript 开发中的许多痛点。例如：</p><ul><li>通过使用 Web 标准，Deno 的 API 将面向未来。这使开发人员有信心，他们不会浪费时间在学习即将过时的东西</li><li>原生支持 TypeScript，提供的编译期类型检查可以将大幅减少软件 bug</li><li>内置工具意味着无需浪费时间寻找开箱即用的产品</li><li>分散式软件包管理使用户从 npm 中解放出来，与使用过时的 CommonJS 规范相比，ECMAScript 模块规范带来了新鲜的空气</li></ul><p>尽管 Deno 在短时间内还不能完全替代 Node.js，但它已经成为日常使用的绝佳编程环境。</p></div><footer class=post-footer><div class=post-tags><a href=/tags/JavaScript/ rel=tag><i class="fa fa-tag"></i> JavaScript</a><a href=/tags/deno/ rel=tag><i class="fa fa-tag"></i> deno</a><a href=/tags/TypeScript/ rel=tag><i class="fa fa-tag"></i> TypeScript</a></div><div class=post-nav><div class=post-nav-item><a href=/2020/03/21/front-end-security-summary/ rel=prev title=前端安全总结><i class="fa fa-chevron-left"></i> 前端安全总结</a></div><div class=post-nav-item><a href=/2020/08/04/the-difference-between-commonjs-mdule-and-es6-module/ rel=next title="CommonJS 模块和 ES6 模块的区别">CommonJS 模块和 ES6 模块的区别<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class=comments id=disqus_thread><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></div></main><footer class=footer><div class=footer-inner><div class=beian><span class=exturl data-url="aHR0cHM6Ly9iZWlhbi5taWl0Lmdvdi5jbg==">浙ICP备18010341号-1</span></div><div class=copyright>&copy; <span itemprop=copyrightYear>2022</span><span class=with-love><i class="fa fa-heart"></i></span> <span class=author itemprop=copyrightHolder>KINGMUI</span></div><div class=wordcount><span class=post-meta-item><span class=post-meta-item-icon><i class="fa fa-chart-line"></i></span> <span title=站点总字数>137k</span></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fa fa-coffee"></i></span> <span title=站点阅读时长>2:04</span></span></div><div class=busuanzi-count><span class=post-meta-item id=busuanzi_container_site_uv><span class=post-meta-item-icon><i class="fa fa-user"></i></span><span class=site-uv title=总访客量><span id=busuanzi_value_site_uv></span></span></span><span class=post-meta-item id=busuanzi_container_site_pv><span class=post-meta-item-icon><i class="fa fa-eye"></i></span><span class=site-pv title=总访问量><span id=busuanzi_value_site_pv></span></span></span></div></div></footer><script size=300 alpha=0.6 zindex=-1 src=https://cdn.jsdelivr.net/npm/ribbon.js@1.0.2/dist/ribbon.min.js></script><script src=https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin=anonymous></script><script src=/js/comments.js></script><script src=/js/utils.js></script><script src=/js/motion.js></script><script src=/js/next-boot.js></script><script src=https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin=anonymous></script><script src=/js/third-party/search/local-search.js></script><script src=//code.tidio.co/2mlfx8hyeje2cy9cft6rpturddkkzkon.js></script><script src=/js/third-party/chat/tidio.js></script><script async src=https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script class=next-config data-name=disqus type=application/json>{"enable":true,"shortname":"kingmui","count":false,"i18n":{"disqus":"disqus"}}</script><script src=/js/third-party/comments/disqus.js></script></body></html>